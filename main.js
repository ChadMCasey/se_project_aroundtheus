!function(){"use strict";class e{constructor(e,t,r,s,i){this._name=e.name,this._link=e.link,this._id=e.id,this._isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=r,this._handleCardLike=i,this._openDeleteModal=s,this._cardElement=null,this._cardImageElement=null,this._cardHeartElement=null,this._cardTrashElement=null,this._cardTextElement=null}generateCard(){return this._cardElement=this._generateCardTemplate(),this._cardImageElement=this._cardElement.querySelector(".card__img"),this._cardHeartElement=this._cardElement.querySelector(".card__heart"),this._cardTrashElement=this._cardElement.querySelector(".card__trash"),this._cardTextElement=this._cardElement.querySelector(".card__title"),this._cardTextElement.textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this.setIsLiked(this._isLiked),this._cardElement}_generateCardTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardImageElement.addEventListener("click",(e=>{this._handleImageClick(this)})),this._cardTrashElement.addEventListener("click",(e=>{this._handleDelete(e)})),this._cardHeartElement.addEventListener("click",(e=>{this._handleLike(e)}))}_handleDelete(e){this._openDeleteModal(this)}_handleLike(e){this._handleCardLike(this)}getCardImageElement(){return this._cardImageElement}getCardText(){return this._cardTextElement}getID(){return this._id}getCardElement(){return this._cardElement}getIsLiked(){return this._isLiked}setIsLiked(e){this._isLiked=e,e?this._cardHeartElement.classList.add("card__heart_dark"):this._cardHeartElement.classList.remove("card__heart_dark")}}class t{constructor(e,t){this._config=e,this._form=t,this._formInputs=null,this._formButton=null}enableValidation(){this._formInputs=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._formButton=this._form.querySelector(this._config.submitButtonSelector),this._setEventListener()}_setEventListener(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this.resetValidation()})),this._formInputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this.resetValidation()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.errorTextClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorTextClass),t.textContent=""}_hasValidInput(){return this._formInputs.every((e=>e.validity.valid))}_toggleButtonState(){this._hasValidInput()?this._formButton.disabled=!1:this._formButton.disabled=!0}resetValidation(){this._formInputs.forEach((e=>{this._hideInputError(e)})),this._formButton.disabled=!0}}class r{constructor(e){this._popupSelector=e,this._popupSelectorNoPeriod=e.replace(".",""),this._popup=document.querySelector(e),this._popupClose=this._popup.querySelector(".modal__close")}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupClose.addEventListener("click",(()=>{this.close()})),this._popup.addEventListener("click",(e=>{e.target.classList.contains(this._popupSelectorNoPeriod)&&this.close()}))}}class s extends r{constructor(e){let{popupSelector:t,handleSubmitFunc:r}=e;super(t),this._handleSubmit=r,this._popUpForm=this._popup.querySelector(".form"),this._inputList=this._popup.querySelectorAll(".form__input"),this._popupSubmit=this._popup.querySelector(".modal__submit"),this._popupSumbitText=this._popupSubmit.textContent}_getInputValues(){const e={};return this._inputList.forEach((t=>e[t.name]=t.value)),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues()),this._popUpForm.reset()})),super.setEventListeners()}toggleSubmitText(e){this._popupSubmit.textContent=e?"Saving...":this._popupSumbitText}}const i={formSelector:".modal__form",formFieldset:".form__fieldset",inputSelector:".form__input",submitButtonSelector:".form__submit",inputErrorClass:"form__input_type_error",errorTextClass:"form__input-error_active"},o=document.forms["profile-form"],n=document.querySelector(".profile").querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__image-edit"),c=Array.from(document.forms),d={};let h=null;const u=new class{constructor(e){this._options=e,this._baseURL=e.baseUrl,this._authtoken=e.headers.authorization,this._contentTypeJSON=e.headers["Content-Type"]}getInitalCards(){return fetch(`${this._baseURL}/cards`,{method:"GET",headers:{authorization:this._authtoken}}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Loading Cards: ${e.status}`)}))}getUserInformation(){return fetch(`${this._baseURL}/users/me`,{method:"GET",headers:{authorization:this._authtoken}}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Loading Cards: ${e.status}`)}))}renderCardsValidator(){return Promise.all([this.getInitalCards(),this.getUserInformation()])}patchProfileInformation(e){let{name:t,about:r}=e;return fetch(`${this._baseURL}/users/me`,{method:"PATCH",headers:{authorization:this._authtoken,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:r})}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Patching Profile Information: ${e.status}`)}))}addCard(e){let{name:t,link:r}=e;return fetch(`${this._baseURL}/cards`,{method:"POST",headers:{authorization:this._authtoken,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:r})}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Addding Cards: ${e.status}`)}))}deleteCard(e){return fetch(`${this._baseURL}/cards/${e}`,{method:"DELETE",headers:{authorization:this._authtoken}}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Deleting Cards: ${e.status}`)}))}likeCard(e){let{cardId:t,likeBool:r}=e;return fetch(`${this._baseURL}/cards/${t}/likes`,{method:r?"DELETE":"PUT",headers:{authorization:this._authtoken}}).then((e=>{if(e.ok)return e.json()})).catch((e=>{console.error(`Error Liking Card: ${e.status}`)}))}updateProfilePicture(e){return fetch(`${this._baseURL}/users/me/avatar`,{method:"PATCH",headers:{authorization:this._authtoken,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Updating Profile Picture: ${e.status}`)}))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"3352b458-30c6-41be-9a42-00c52b81b385","Content-Type":"application/json"}}),m=new class{constructor(e){let{nameSelector:t,jobSelector:r,photoSelector:s}=e;this._nameElem=document.querySelector(t),this._jobElem=document.querySelector(r),this._imageElem=document.querySelector(s)}getUserInfo(){return{name:this._nameElem.textContent,job:this._jobElem.textContent}}setUserInfo(e){let{name:t,job:r}=e;this._nameElem.textContent=t,this._jobElem.textContent=r}setUserPhoto(e){let{avatar:t}=e;this._imageElem.src=t}}({nameSelector:".profile__name",jobSelector:".profile__avocation",photoSelector:".profile__avatar"}),_=new s({popupSelector:".profile-modal",handleSubmitFunc:e=>{_.toggleSubmitText(!0),u.patchProfileInformation({name:e.name,about:e.job}).then((t=>{_.close(),m.setUserInfo({name:e.name,job:e.job}),_.toggleSubmitText(!1)}))}}),p=new s({popupSelector:".add-modal",handleSubmitFunc:e=>{p.toggleSubmitText(!0),u.addCard({name:e.name,link:e.link}).then((e=>{const t=k({name:e.name,link:e.link,id:e._id,isLiked:e.isLiked});S.addItem(t),p.close(),p.toggleSubmitText(!1)}))}}),E=new s({popupSelector:".profile-image-modal",handleSubmitFunc:e=>{E.toggleSubmitText(!0),u.updateProfilePicture(e.avatar).then((t=>{m.setUserPhoto(e),E.close(),E.toggleSubmitText(!1)}))}}),g=new class extends r{constructor(e){let{popupSelector:t}=e;super(t),this._popupImage=this._popup.querySelector(".image-modal__img"),this._popupTitle=this._popup.querySelector(".image-modal__title")}open(e){let{cardName:t,cardLink:r}=e;this._popupImage.src="",this._popupImage.src=r,this._popupImage.alt=t,this._popupTitle.textContent=t,super.open()}}({popupSelector:".image-modal"}),f=new class extends r{constructor(e){let{popupSelector:t,handleSubmitFunc:r}=e;super(t),this._handleSubmit=r,this._submitDelete=this._popup.querySelector(".modal__submit"),this._popupSubmit=this._popup.querySelector(".modal__submit"),this._popupSumbitText=this._popupSubmit.textContent}setEventListeners(){this._submitDelete.addEventListener("click",(()=>{this._handleSubmit()})),super.setEventListeners()}toggleSubmitText(e){this._popupSubmit.textContent=e?"Saving...":this._popupSumbitText}}({popupSelector:".delete-modal",handleSubmitFunc:()=>{f.toggleSubmitText(!0),u.deleteCard(h.getID()).then((e=>{h.getCardElement().remove(),h=null,f.close(),f.toggleSubmitText(!1)}))}}),S=new class{constructor(e){this._container=document.querySelector(e)}addItem(e){this._container.prepend(e)}}(".cards__list");function b(e){h=e,f.open()}function L(e){const t=e.getCardImageElement(),r=e.getCardText();g.open({cardName:r.textContent,cardLink:t.src})}function k(t){return new e({name:t.name,link:t.link,id:t.id,isLiked:t.isLiked},".card-template",L,b,C).generateCard()}function C(e){u.likeCard({cardId:e.getID(),likeBool:e.getIsLiked()}).then((t=>{e.setIsLiked(t.isLiked)}))}c.forEach((e=>{const r=new t(i,e);d[e.id]=r,r.enableValidation()})),u.renderCardsValidator().then((e=>{e[0].sort(((e,t)=>new Date(e.createdAt)-new Date(t.createdAt))).forEach((e=>{const t=k({name:e.name,link:e.link,id:e._id,isLiked:e.isLiked});S.addItem(t)}))})),u.getUserInformation().then((e=>{m.setUserInfo({name:e.name,job:e.about}),m.setUserPhoto({avatar:e.avatar})})),n.addEventListener("click",(function(){_.open(),d[o.id].resetValidation();const{name:e,job:t}=m.getUserInfo();_.setInputValues({name:e,job:t})})),a.addEventListener("click",(()=>{p.open()})),l.addEventListener("click",(()=>{E.open()})),p.setEventListeners(),g.setEventListeners(),f.setEventListeners(),_.setEventListeners(),E.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixFQUFjakYsb0JBQ2R1RixFQUFnQnZGLG9CQUNoQjRGLEVBQWlCNUYsb0JBQ2pCZ0YsRUFBa0JoRixvQkFDbEJzRixFQUFzQnRGLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQVBJLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwRGVsZXRlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIG9wZW5EZWxldGVNb2RhbCxcclxuICAgIGhhbmRsZUNhcmRMaWtlXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2lkID0gZGF0YS5pZDtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7XHJcbiAgICB0aGlzLl9vcGVuRGVsZXRlTW9kYWwgPSBvcGVuRGVsZXRlTW9kYWw7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IG51bGw7XHJcbiAgICB0aGlzLl9jYXJkSGVhcnRFbGVtZW50ID0gbnVsbDtcclxuICAgIHRoaXMuX2NhcmRUcmFzaEVsZW1lbnQgPSBudWxsO1xyXG4gICAgdGhpcy5fY2FyZFRleHRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2VuZXJhdGVDYXJkVGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltZ1wiKTtcclxuICAgIHRoaXMuX2NhcmRIZWFydEVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2hlYXJ0XCIpO1xyXG4gICAgdGhpcy5fY2FyZFRyYXNoRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIik7XHJcbiAgICB0aGlzLl9jYXJkVGV4dEVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuc2V0SXNMaWtlZCh0aGlzLl9pc0xpa2VkKTsgLy8gb24gbG9hZCBzZXQgaXNsaWtlZC5cclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfZ2VuZXJhdGVDYXJkVGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRUcmFzaEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZShlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEhlYXJ0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZShlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZShlKSB7XHJcbiAgICB0aGlzLl9vcGVuRGVsZXRlTW9kYWwodGhpcyk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZShlKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSh0aGlzKTtcclxuICB9XHJcblxyXG4gIGdldENhcmRJbWFnZUVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEltYWdlRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdldENhcmRUZXh0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRUZXh0RWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdldElEKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZEVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZXRJc0xpa2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICBzZXRJc0xpa2VkKGJvb2wpIHtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBib29sO1xyXG4gICAgYm9vbFxyXG4gICAgICA/IHRoaXMuX2NhcmRIZWFydEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNhcmRfX2hlYXJ0X2RhcmtcIilcclxuICAgICAgOiB0aGlzLl9jYXJkSGVhcnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19oZWFydF9kYXJrXCIpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSBudWxsOyAvLyBtYWtlIHRoZXNlIGVhc2lseSBhY2Nlc3NpYmxlIHRocm91Z2hvdXQgdGhlIGNsYXNzXHJcbiAgICB0aGlzLl9mb3JtQnV0dG9uID0gbnVsbDsgLy8gdG8gYXZvaWQgcGFzc2luZyB0aGVtIHRocm91Z2ggbWV0aG9kIGNhbGxzXHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9mb3JtQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yVGV4dENsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvclRleHRDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2hhc1ZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybUlucHV0cy5ldmVyeSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuIGlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzVmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yTm9QZXJpb2QgPSBwb3B1cFNlbGVjdG9yLnJlcGxhY2UoXCIuXCIsIFwiXCIpO1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBDbG9zZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgZS5rZXkgPT09IFwiRXNjYXBlXCIgJiYgdGhpcy5jbG9zZSgpO1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBjbGljayBvdXRzaWRlIG1vZGFsXHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyh0aGlzLl9wb3B1cFNlbGVjdG9yTm9QZXJpb2QpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0RnVuYyB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdEZ1bmM7XHJcbiAgICB0aGlzLl9wb3BVcEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xyXG4gICAgdGhpcy5fcG9wdXBTdWJtaXQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXRcIik7XHJcbiAgICB0aGlzLl9wb3B1cFN1bWJpdFRleHQgPSB0aGlzLl9wb3B1cFN1Ym1pdC50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IHZhbHVlc09iaiA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiAodmFsdWVzT2JqW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcclxuICAgIHJldHVybiB2YWx1ZXNPYmo7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuX3BvcFVwRm9ybS5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlU3VibWl0VGV4dChib29sKSB7XHJcbiAgICB0aGlzLl9wb3B1cFN1Ym1pdC50ZXh0Q29udGVudCA9IGJvb2wgPyBcIlNhdmluZy4uLlwiIDogdGhpcy5fcG9wdXBTdW1iaXRUZXh0O1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBmb3JtVmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgZm9ybUZpZWxkc2V0OiBcIi5mb3JtX19maWVsZHNldFwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JUZXh0Q2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgeyBmb3JtVmFsaWRhdGlvbkNvbmZpZyB9O1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwRGVsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwRGVsZXRlLmpzXCI7XHJcblxyXG5pbXBvcnQgQVBJIGZyb20gXCIuLi9jb21wb25lbnRzL0FQSS5qc1wiO1xyXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgZm9ybVZhbGlkYXRpb25Db25maWcsIGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8vIGVkaXQgbW9kYWxcclxuY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZm9ybVwiXTtcclxuXHJcbi8vIHByb2ZpbGVcclxuY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZVwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG4vLyBjb25zdCBwcm9maWxlIGltYWdlIGVkaXQgYnV0dHRvblxyXG5jb25zdCBwcm9maWxlSW1hZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLWVkaXRcIik7XHJcblxyXG4vLyBhbGwgZm9ybXNcclxuY29uc3QgZm9ybXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LmZvcm1zKTtcclxuY29uc3QgZm9ybU9iamVjdHMgPSB7fTtcclxuXHJcbi8vIGhvbGQgY2FyZCB0byBkZWxldGVcclxubGV0IGNhcmRUb0RlbGV0ZSA9IG51bGw7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQVBJKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIzMzUyYjQ1OC0zMGM2LTQxYmUtOWE0Mi0wMGM1MmI4MWIzODVcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gdXNlciBpbmZvIG1hbmlwdWxhdGlvbiBjbGFzc1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F2b2NhdGlvblwiLFxyXG4gIHBob3RvU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxyXG59KTtcclxuXHJcbi8vIHByb2ZpbGUgbW9kYWwgcG9wdXBcclxuY29uc3QgcHJvZmlsZU1vZGFsUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucHJvZmlsZS1tb2RhbFwiLFxyXG4gIGhhbmRsZVN1Ym1pdEZ1bmM6IChkYXRhKSA9PiB7XHJcbiAgICBwcm9maWxlTW9kYWxQb3B1cC50b2dnbGVTdWJtaXRUZXh0KHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5wYXRjaFByb2ZpbGVJbmZvcm1hdGlvbih7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBkYXRhLmpvYixcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHByb2ZpbGVNb2RhbFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgam9iOiBkYXRhLmpvYixcclxuICAgICAgICB9KTtcclxuICAgICAgICBwcm9maWxlTW9kYWxQb3B1cC50b2dnbGVTdWJtaXRUZXh0KGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBhZGQgbW9kYWwgcG9wdXBcclxuY29uc3QgYWRkTW9kYWxQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5hZGQtbW9kYWxcIixcclxuICBoYW5kbGVTdWJtaXRGdW5jOiAoZGF0YSkgPT4ge1xyXG4gICAgYWRkTW9kYWxQb3B1cC50b2dnbGVTdWJtaXRUZXh0KHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5hZGRDYXJkKHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgbGluazogZGF0YS5saW5rLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZE9iaiA9IGNyZWF0ZUNhcmQoe1xyXG4gICAgICAgICAgbmFtZTogcmVzLm5hbWUsXHJcbiAgICAgICAgICBsaW5rOiByZXMubGluayxcclxuICAgICAgICAgIGlkOiByZXMuX2lkLFxyXG4gICAgICAgICAgaXNMaWtlZDogcmVzLmlzTGlrZWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVuZGVyQ2FyZHMuYWRkSXRlbShjYXJkT2JqKTtcclxuICAgICAgICBhZGRNb2RhbFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgYWRkTW9kYWxQb3B1cC50b2dnbGVTdWJtaXRUZXh0KGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBlZGl0IHByb2ZpbGUgaW1hZ2UgcG9wdXBcclxuY29uc3QgZWRpdFByb2ZpbGVJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiLnByb2ZpbGUtaW1hZ2UtbW9kYWxcIixcclxuICBoYW5kbGVTdWJtaXRGdW5jOiAoZGF0YSkgPT4ge1xyXG4gICAgZWRpdFByb2ZpbGVJbWFnZVBvcHVwLnRvZ2dsZVN1Ym1pdFRleHQodHJ1ZSk7XHJcbiAgICBhcGkudXBkYXRlUHJvZmlsZVBpY3R1cmUoZGF0YS5hdmF0YXIpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VyUGhvdG8oZGF0YSk7XHJcbiAgICAgIGVkaXRQcm9maWxlSW1hZ2VQb3B1cC5jbG9zZSgpO1xyXG4gICAgICBlZGl0UHJvZmlsZUltYWdlUG9wdXAudG9nZ2xlU3VibWl0VGV4dChmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIGltYWdlIHBvcHVwXHJcbmNvbnN0IGltYWdlTW9kYWxQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIuaW1hZ2UtbW9kYWxcIixcclxufSk7XHJcblxyXG4vLyBkZWxldGUgY2FyZCBwb3B1cFxyXG5jb25zdCBkZWxldGVNb2RhbFBvcHVwID0gbmV3IFBvcHVwRGVsZXRlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5kZWxldGUtbW9kYWxcIixcclxuICBoYW5kbGVTdWJtaXRGdW5jOiAoKSA9PiB7XHJcbiAgICBkZWxldGVNb2RhbFBvcHVwLnRvZ2dsZVN1Ym1pdFRleHQodHJ1ZSk7XHJcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkVG9EZWxldGUuZ2V0SUQoKSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNhcmRUb0RlbGV0ZS5nZXRDYXJkRWxlbWVudCgpLnJlbW92ZSgpO1xyXG4gICAgICBjYXJkVG9EZWxldGUgPSBudWxsO1xyXG4gICAgICBkZWxldGVNb2RhbFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIGRlbGV0ZU1vZGFsUG9wdXAudG9nZ2xlU3VibWl0VGV4dChmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIGNyZWF0ZSBjYXJkcyB2aWEgc2VjdGlvbiBjbGFzc1xyXG5jb25zdCByZW5kZXJDYXJkcyA9IG5ldyBTZWN0aW9uKFwiLmNhcmRzX19saXN0XCIpO1xyXG5cclxuZm9ybXMuZm9yRWFjaCgoZm9ybSkgPT4ge1xyXG4gIGNvbnN0IGZvcm1PYmogPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtVmFsaWRhdGlvbkNvbmZpZywgZm9ybSk7XHJcbiAgZm9ybU9iamVjdHNbZm9ybS5pZF0gPSBmb3JtT2JqO1xyXG4gIGZvcm1PYmouZW5hYmxlVmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVNhdmluZygpIHt9XHJcblxyXG5mdW5jdGlvbiBvcGVuRWRpdE1vZGFsKCkge1xyXG4gIHByb2ZpbGVNb2RhbFBvcHVwLm9wZW4oKTtcclxuICBmb3JtT2JqZWN0c1twcm9maWxlRm9ybS5pZF0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZU1vZGFsUG9wdXAuc2V0SW5wdXRWYWx1ZXMoe1xyXG4gICAgbmFtZSxcclxuICAgIGpvYixcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlbkRlbGV0ZU1vZGFsKGNhcmQpIHtcclxuICBjYXJkVG9EZWxldGUgPSBjYXJkO1xyXG4gIGRlbGV0ZU1vZGFsUG9wdXAub3BlbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuSW1hZ2VNb2RhbChjYXJkKSB7XHJcbiAgY29uc3QgaW1hZ2UgPSBjYXJkLmdldENhcmRJbWFnZUVsZW1lbnQoKTtcclxuICBjb25zdCB0aXRsZSA9IGNhcmQuZ2V0Q2FyZFRleHQoKTtcclxuICBpbWFnZU1vZGFsUG9wdXAub3Blbih7XHJcbiAgICBjYXJkTmFtZTogdGl0bGUudGV4dENvbnRlbnQsXHJcbiAgICBjYXJkTGluazogaW1hZ2Uuc3JjLFxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkT2JqID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcclxuICAgICAgbGluazogaXRlbS5saW5rLFxyXG4gICAgICBpZDogaXRlbS5pZCxcclxuICAgICAgaXNMaWtlZDogaXRlbS5pc0xpa2VkLFxyXG4gICAgfSxcclxuICAgIFwiLmNhcmQtdGVtcGxhdGVcIixcclxuICAgIG9wZW5JbWFnZU1vZGFsLFxyXG4gICAgb3BlbkRlbGV0ZU1vZGFsLFxyXG4gICAgaGFuZGxlQ2FyZExpa2VcclxuICApO1xyXG4gIHJldHVybiBjYXJkT2JqLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkTGlrZShjYXJkKSB7XHJcbiAgYXBpXHJcbiAgICAubGlrZUNhcmQoe1xyXG4gICAgICBjYXJkSWQ6IGNhcmQuZ2V0SUQoKSxcclxuICAgICAgbGlrZUJvb2w6IGNhcmQuZ2V0SXNMaWtlZCgpLFxyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY2FyZC5zZXRJc0xpa2VkKHJlcy5pc0xpa2VkKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyBvbiBsb2FkIHJlbmRlciBwcmVleGlzdGluZyBjYXJkc1xyXG5hcGkucmVuZGVyQ2FyZHNWYWxpZGF0b3IoKS50aGVuKChyZXMpID0+IHtcclxuICAvLyBzb3J0IHRoZSBjYXJkcyBvbiB0aGUgY3JlYXRpb24gZGF0ZSBkYXRlIGJlZm9yZSB3ZSByZW5kZXIgdGhlbS5cclxuICBjb25zdCBzb3J0ZWRDYXJkcyA9IHJlc1swXS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICByZXR1cm4gbmV3IERhdGUoYS5jcmVhdGVkQXQpIC0gbmV3IERhdGUoYi5jcmVhdGVkQXQpO1xyXG4gIH0pO1xyXG4gIHNvcnRlZENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAgIGNvbnN0IGNhcmRPYmogPSBjcmVhdGVDYXJkKHtcclxuICAgICAgbmFtZTogY2FyZC5uYW1lLFxyXG4gICAgICBsaW5rOiBjYXJkLmxpbmssXHJcbiAgICAgIGlkOiBjYXJkLl9pZCxcclxuICAgICAgaXNMaWtlZDogY2FyZC5pc0xpa2VkLFxyXG4gICAgfSk7XHJcbiAgICByZW5kZXJDYXJkcy5hZGRJdGVtKGNhcmRPYmopO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbi8vIG9uIGxvYWQgc2V0IHVzZXIgaW5mb3JtYXRpb25cclxuYXBpLmdldFVzZXJJbmZvcm1hdGlvbigpLnRoZW4oKHJlcykgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgIG5hbWU6IHJlcy5uYW1lLFxyXG4gICAgam9iOiByZXMuYWJvdXQsXHJcbiAgfSk7XHJcbiAgdXNlckluZm8uc2V0VXNlclBob3RvKHtcclxuICAgIGF2YXRhcjogcmVzLmF2YXRhcixcclxuICB9KTtcclxufSk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkVkaXRNb2RhbCk7XHJcbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRNb2RhbFBvcHVwLm9wZW4oKTtcclxufSk7XHJcbnByb2ZpbGVJbWFnZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRQcm9maWxlSW1hZ2VQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkTW9kYWxQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5pbWFnZU1vZGFsUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZGVsZXRlTW9kYWxQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wcm9maWxlTW9kYWxQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5lZGl0UHJvZmlsZUltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQVBJIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAgIHRoaXMuX2Jhc2VVUkwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICB0aGlzLl9hdXRodG9rZW4gPSBvcHRpb25zLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICAgIHRoaXMuX2NvbnRlbnRUeXBlSlNPTiA9IG9wdGlvbnMuaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXTtcclxuICB9XHJcblxyXG4gIGdldEluaXRhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRodG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIExvYWRpbmcgQ2FyZHM6ICR7ZXJyLnN0YXR1c31gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mb3JtYXRpb24oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGh0b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgTG9hZGluZyBDYXJkczogJHtlcnIuc3RhdHVzfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckNhcmRzVmFsaWRhdG9yKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRhbENhcmRzKCksIHRoaXMuZ2V0VXNlckluZm9ybWF0aW9uKCldKTtcclxuICB9XHJcblxyXG4gIHBhdGNoUHJvZmlsZUluZm9ybWF0aW9uKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGh0b2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBQYXRjaGluZyBQcm9maWxlIEluZm9ybWF0aW9uOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aHRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgQWRkZGluZyBDYXJkczogJHtlcnIuc3RhdHVzfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICAvLyB0aGUgY2FyZCBpZCBpcyBmb3VuZCBpbiB0aGUgcmVzcGVjdGl2ZSBqc29uIG9iamVjdFxyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aHRva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBEZWxldGluZyBDYXJkczogJHtlcnIuc3RhdHVzfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKHsgY2FyZElkLCBsaWtlQm9vbCB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGxpa2VCb29sID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRodG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIExpa2luZyBDYXJkOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUHJvZmlsZVBpY3R1cmUoaW1hZ2VVUkwpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aHRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBpbWFnZVVSTCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIFVwZGF0aW5nIFByb2ZpbGUgUGljdHVyZTogJHtlcnIuc3RhdHVzfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgcGhvdG9TZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGhvdG9TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtLnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW0udGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW0udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxlbS50ZXh0Q29udGVudCA9IGpvYjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJQaG90byh7IGF2YXRhcjogbGluayB9KSB7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW0uc3JjID0gbGluaztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1tb2RhbF9faW1nXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtbW9kYWxfX3RpdGxlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IGNhcmROYW1lLCBjYXJkTGluayB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IFwiXCI7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGNhcmRMaW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBjYXJkTmFtZTtcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBjYXJkTmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cERlbGV0ZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZ1bmMgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXRGdW5jO1xyXG4gICAgdGhpcy5fc3VibWl0RGVsZXRlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0XCIpO1xyXG4gICAgdGhpcy5fcG9wdXBTdWJtaXQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXRcIik7XHJcbiAgICB0aGlzLl9wb3B1cFN1bWJpdFRleHQgPSB0aGlzLl9wb3B1cFN1Ym1pdC50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fc3VibWl0RGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgLy8gbm90IGFsbCBwb3B1cHMgaGF2ZSBzdWJtaXRzIChzbyBpIGNvdWxkbnQgcHV0IHRoaXMgaW4gdGhlIHBhcmVudCBjbGFzcylcclxuICB0b2dnbGVTdWJtaXRUZXh0KGJvb2wpIHtcclxuICAgIHRoaXMuX3BvcHVwU3VibWl0LnRleHRDb250ZW50ID0gYm9vbCA/IFwiU2F2aW5nLi4uXCIgOiB0aGlzLl9wb3B1cFN1bWJpdFRleHQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm9wZW5EZWxldGVNb2RhbCIsImhhbmRsZUNhcmRMaWtlIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsImlkIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUNhcmRMaWtlIiwiX29wZW5EZWxldGVNb2RhbCIsIl9jYXJkRWxlbWVudCIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiX2NhcmRIZWFydEVsZW1lbnQiLCJfY2FyZFRyYXNoRWxlbWVudCIsIl9jYXJkVGV4dEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJfZ2VuZXJhdGVDYXJkVGVtcGxhdGUiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzZXRJc0xpa2VkIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJfaGFuZGxlRGVsZXRlIiwiX2hhbmRsZUxpa2UiLCJnZXRDYXJkSW1hZ2VFbGVtZW50IiwiZ2V0Q2FyZFRleHQiLCJnZXRJRCIsImdldENhcmRFbGVtZW50IiwiZ2V0SXNMaWtlZCIsImJvb2wiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybSIsIl9jb25maWciLCJfZm9ybSIsIl9mb3JtSW5wdXRzIiwiX2Zvcm1CdXR0b24iLCJlbmFibGVWYWxpZGF0aW9uIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9zZXRFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwiaW5wdXQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yVGV4dENsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzVmFsaWRJbnB1dCIsImV2ZXJ5IiwiZGlzYWJsZWQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yTm9QZXJpb2QiLCJyZXBsYWNlIiwiX3BvcHVwIiwiX3BvcHVwQ2xvc2UiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJfcmVmIiwiaGFuZGxlU3VibWl0RnVuYyIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdCIsIl9wb3BVcEZvcm0iLCJfaW5wdXRMaXN0IiwiX3BvcHVwU3VibWl0IiwiX3BvcHVwU3VtYml0VGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlc09iaiIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsInRvZ2dsZVN1Ym1pdFRleHQiLCJmb3JtVmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImZvcm1GaWVsZHNldCIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJwcm9maWxlSW1hZ2VCdXR0b24iLCJmb3JtT2JqZWN0cyIsImNhcmRUb0RlbGV0ZSIsImFwaSIsIm9wdGlvbnMiLCJfb3B0aW9ucyIsIl9iYXNlVVJMIiwiYmFzZVVybCIsIl9hdXRodG9rZW4iLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsIl9jb250ZW50VHlwZUpTT04iLCJnZXRJbml0YWxDYXJkcyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsInN0YXR1cyIsImdldFVzZXJJbmZvcm1hdGlvbiIsInJlbmRlckNhcmRzVmFsaWRhdG9yIiwiYWxsIiwicGF0Y2hQcm9maWxlSW5mb3JtYXRpb24iLCJhYm91dCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkQ2FyZCIsIl9yZWYyIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImxpa2VDYXJkIiwiX3JlZjMiLCJsaWtlQm9vbCIsInVwZGF0ZVByb2ZpbGVQaWN0dXJlIiwiaW1hZ2VVUkwiLCJhdmF0YXIiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwicGhvdG9TZWxlY3RvciIsIl9uYW1lRWxlbSIsIl9qb2JFbGVtIiwiX2ltYWdlRWxlbSIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJzZXRVc2VyUGhvdG8iLCJwcm9maWxlTW9kYWxQb3B1cCIsImFkZE1vZGFsUG9wdXAiLCJjYXJkT2JqIiwiY3JlYXRlQ2FyZCIsInJlbmRlckNhcmRzIiwiYWRkSXRlbSIsImVkaXRQcm9maWxlSW1hZ2VQb3B1cCIsImltYWdlTW9kYWxQb3B1cCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJjYXJkTmFtZSIsImNhcmRMaW5rIiwiZGVsZXRlTW9kYWxQb3B1cCIsIl9zdWJtaXREZWxldGUiLCJjb250YWluZXJTZWxlY3RvciIsIl9jb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsImNhcmQiLCJvcGVuSW1hZ2VNb2RhbCIsImltYWdlIiwidGl0bGUiLCJmb3JtT2JqIiwic29ydCIsImEiLCJiIiwiRGF0ZSIsImNyZWF0ZWRBdCJdLCJzb3VyY2VSb290IjoiIn0=