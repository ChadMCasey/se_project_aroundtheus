!function(){"use strict";class e{constructor(e,t,s,r,i){this._name=e.name,this._link=e.link,this._id=e.id,this._isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=s,this._handleCardLike=i,this._openDeleteModal=r,this._cardElement=null,this._cardImageElement=null,this._cardHeartElement=null,this._cardTrashElement=null,this._cardTextElement=null}generateCard(){return this._cardElement=this._generateCardTemplate(),this._cardImageElement=this._cardElement.querySelector(".card__img"),this._cardHeartElement=this._cardElement.querySelector(".card__heart"),this._cardTrashElement=this._cardElement.querySelector(".card__trash"),this._cardTextElement=this._cardElement.querySelector(".card__title"),this._cardTextElement.textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this.setIsLiked(this._isLiked),this._cardElement}_generateCardTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardImageElement.addEventListener("click",(e=>{this._handleImageClick(this)})),this._cardTrashElement.addEventListener("click",(e=>{this._handleDelete(e)})),this._cardHeartElement.addEventListener("click",(e=>{this._handleLike(e)}))}_handleDelete(e){this._openDeleteModal(this)}_handleLike(e){this._handleCardLike(this)}getCardImageElement(){return this._cardImageElement}getCardText(){return this._cardTextElement}getID(){return this._id}getCardElement(){return this._cardElement}getIsLiked(){return this._isLiked}setIsLiked(e){this._isLiked=e,e?this._cardHeartElement.classList.add("card__heart_dark"):this._cardHeartElement.classList.remove("card__heart_dark")}}class t{constructor(e,t){this._config=e,this._form=t,this._formInputs=null,this._formButton=null}enableValidation(){this._formInputs=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._formButton=this._form.querySelector(this._config.submitButtonSelector),this._setEventListener()}_setEventListener(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this.resetValidation()})),this._formInputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this.resetValidation()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.errorTextClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorTextClass),t.textContent=""}_hasValidInput(){return this._formInputs.every((e=>e.validity.valid))}_toggleButtonState(){this._hasValidInput()?this._formButton.disabled=!1:this._formButton.disabled=!0}resetValidation(){this._formInputs.forEach((e=>{this._hideInputError(e)})),this._formButton.disabled=!0}}class s{constructor(e){this._popupSelector=e,this._popupSelectorNoPeriod=e.replace(".",""),this._popup=document.querySelector(e),this._popupClose=this._popup.querySelector(".modal__close")}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupClose.addEventListener("click",(()=>{this.close()})),this._popup.addEventListener("click",(e=>{e.target.classList.contains(this._popupSelectorNoPeriod)&&this.close()}))}}class r extends s{constructor(e){let{popupSelector:t,handleSubmitFunc:s}=e;super(t),this._handleSubmit=s,this._popUpForm=this._popup.querySelector(".form"),this._inputList=this._popup.querySelectorAll(".form__input"),this._popupSubmit=this._popup.querySelector(".modal__submit"),this._popupSubmitText=this._popupSubmit.textContent}_getInputValues(){const e={};return this._inputList.forEach((t=>e[t.name]=t.value)),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues())})),super.setEventListeners()}renderLoading(e){let{isLoading:t,loadingText:s="Saving..."}=e;this._popupSubmit.textContent=t?s:this._popupSubmitText}getForm(){return this._popUpForm}}const i={formSelector:".modal__form",formFieldset:".form__fieldset",inputSelector:".form__input",submitButtonSelector:".form__submit",inputErrorClass:"form__input_type_error",errorTextClass:"form__input-error_active"},n=document.forms["profile-form"],o=document.querySelector(".profile").querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__image-edit"),d=Array.from(document.forms),h={};let c=null;const u=new class{constructor(e){this._options=e,this._baseURL=e.baseUrl,this._headers=e.headers,this._authtoken=e.headers.authorization,this._contentTypeJSON=e.headers["Content-Type"]}getUserInformation(){return this._request(`${this._baseURL}/users/me`,{method:"GET",headers:this._headers})}getAppInfo(){return Promise.all([this.getInitalCards(),this.getUserInformation()])}patchProfileInformation(e){let{name:t,about:s}=e;return this._request(`${this._baseURL}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})})}addCard(e){let{name:t,link:s}=e;return this._request(`${this._baseURL}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})})}deleteCard(e){return this._request(`${this._baseURL}/cards/${e}`,{method:"DELETE",headers:this._headers})}likeCard(e){let{cardId:t,likeBool:s}=e;return this._request(`${this._baseURL}/cards/${t}/likes`,{method:s?"DELETE":"PUT",headers:this._headers})}updateProfilePicture(e){return this._request(`${this._baseURL}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}getInitalCards(){return this._request(`${this._baseURL}/cards`,{method:"GET",headers:this._headers})}_checkResponse(e){return e.ok?e.json():Promise.reject(e)}_request(e,t){return fetch(e,t).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"3352b458-30c6-41be-9a42-00c52b81b385","Content-Type":"application/json"}}),_=new class{constructor(e){let{nameSelector:t,jobSelector:s,photoSelector:r}=e;this._nameElem=document.querySelector(t),this._jobElem=document.querySelector(s),this._imageElem=document.querySelector(r)}getUserInfo(){return{name:this._nameElem.textContent,job:this._jobElem.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._nameElem.textContent=t,this._jobElem.textContent=s}setUserPhoto(e){let{avatar:t}=e;this._imageElem.src=t}}({nameSelector:".profile__name",jobSelector:".profile__avocation",photoSelector:".profile__avatar"}),m=new r({popupSelector:".profile-modal",handleSubmitFunc:e=>{m.renderLoading({isLoading:!0}),u.patchProfileInformation({name:e.name,about:e.job}).then((t=>{m.close(),_.setUserInfo({name:e.name,job:e.job}),m.getForm().reset()})).catch((e=>{console.error(`Patch Profile Error: ${e.status}`)})).finally((()=>{m.renderLoading({isLoading:!1})}))}}),p=new r({popupSelector:".add-modal",handleSubmitFunc:e=>{p.renderLoading({isLoading:!0}),u.addCard({name:e.name,link:e.link}).then((e=>{const t=k({name:e.name,link:e.link,id:e._id,isLiked:e.isLiked});f.addItem(t),p.close(),p.getForm().reset()})).catch((e=>{console.error(`Create Card Error: ${e.status}`)})).finally((()=>{p.renderLoading({isLoading:!1})}))}}),E=new r({popupSelector:".profile-image-modal",handleSubmitFunc:e=>{E.renderLoading({isLoading:!0}),u.updateProfilePicture(e.avatar).then((t=>{_.setUserPhoto(e),E.close(),E.getForm().reset()})).catch((e=>{console.error(`Edit Profile Image Error: ${e.status}`)})).finally((()=>{E.renderLoading({isLoading:!1})}))}}),L=new class extends s{constructor(e){let{popupSelector:t}=e;super(t),this._popupImage=this._popup.querySelector(".image-modal__img"),this._popupTitle=this._popup.querySelector(".image-modal__title")}open(e){let{cardName:t,cardLink:s}=e;this._popupImage.src="",this._popupImage.src=s,this._popupImage.alt=t,this._popupTitle.textContent=t,super.open()}}({popupSelector:".image-modal"}),g=new class extends s{constructor(e){let{popupSelector:t,handleSubmitFunc:s}=e;super(t),this._handleSubmit=s,this._submitDelete=this._popup.querySelector(".modal__submit"),this._submitDeleteText=this._submitDelete.textContent}setEventListeners(){this._submitDelete.addEventListener("click",(()=>{this._handleSubmit()})),super.setEventListeners()}renderLoading(e){let{isLoading:t,loadingText:s="Deleting..."}=e;this._submitDelete.textContent=t?s:this._submitDeleteText}}({popupSelector:".delete-modal",handleSubmitFunc:()=>{g.renderLoading({isLoading:!0}),u.deleteCard(c.getID()).then((e=>{c.getCardElement().remove(),c=null,g.close()})).catch((e=>{console.error(`Delete Card Error: ${e.status}`)})).finally((()=>{g.renderLoading({isLoading:!1})}))}}),f=new class{constructor(e){this._container=document.querySelector(e)}addItem(e){this._container.prepend(e)}}(".cards__list");function S(e){c=e,g.open()}function b(e){const t=e.getCardImageElement(),s=e.getCardText();L.open({cardName:s.textContent,cardLink:t.src})}function k(t){return new e({name:t.name,link:t.link,id:t.id,isLiked:t.isLiked},".card-template",b,S,I).generateCard()}function I(e){u.likeCard({cardId:e.getID(),likeBool:e.getIsLiked()}).then((t=>{e.setIsLiked(t.isLiked)}))}d.forEach((e=>{const s=new t(i,e);h[e.id]=s,s.enableValidation()})),u.getAppInfo().then((e=>{let[t,s]=e;t.sort(((e,t)=>new Date(e.createdAt)-new Date(t.createdAt))).forEach((e=>{const t=k({name:e.name,link:e.link,id:e._id,isLiked:e.isLiked});f.addItem(t)})),_.setUserInfo({name:s.name,job:s.about}),_.setUserPhoto({avatar:s.avatar})})).catch((e=>{console.error(`Load Intial Data Error: ${e.status}`)})),o.addEventListener("click",(function(){m.open(),h[n.id].resetValidation();const{name:e,job:t}=_.getUserInfo();m.setInputValues({name:e,job:t})})),a.addEventListener("click",(()=>{p.open()})),l.addEventListener("click",(()=>{E.open()})),p.setEventListeners(),L.setEventListeners(),g.setEventListeners(),m.setEventListeners(),E.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BUEkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIG9wZW5EZWxldGVNb2RhbCxcclxuICAgIGhhbmRsZUNhcmRMaWtlXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2lkID0gZGF0YS5pZDtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7XHJcbiAgICB0aGlzLl9vcGVuRGVsZXRlTW9kYWwgPSBvcGVuRGVsZXRlTW9kYWw7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IG51bGw7XHJcbiAgICB0aGlzLl9jYXJkSGVhcnRFbGVtZW50ID0gbnVsbDtcclxuICAgIHRoaXMuX2NhcmRUcmFzaEVsZW1lbnQgPSBudWxsO1xyXG4gICAgdGhpcy5fY2FyZFRleHRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2VuZXJhdGVDYXJkVGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltZ1wiKTtcclxuICAgIHRoaXMuX2NhcmRIZWFydEVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2hlYXJ0XCIpO1xyXG4gICAgdGhpcy5fY2FyZFRyYXNoRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIik7XHJcbiAgICB0aGlzLl9jYXJkVGV4dEVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuc2V0SXNMaWtlZCh0aGlzLl9pc0xpa2VkKTsgLy8gb24gbG9hZCBzZXQgaXNsaWtlZC5cclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfZ2VuZXJhdGVDYXJkVGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRUcmFzaEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZShlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEhlYXJ0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZShlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZShlKSB7XHJcbiAgICB0aGlzLl9vcGVuRGVsZXRlTW9kYWwodGhpcyk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZShlKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSh0aGlzKTtcclxuICB9XHJcblxyXG4gIGdldENhcmRJbWFnZUVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEltYWdlRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdldENhcmRUZXh0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRUZXh0RWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdldElEKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZEVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZXRJc0xpa2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICBzZXRJc0xpa2VkKGJvb2wpIHtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBib29sO1xyXG4gICAgYm9vbFxyXG4gICAgICA/IHRoaXMuX2NhcmRIZWFydEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNhcmRfX2hlYXJ0X2RhcmtcIilcclxuICAgICAgOiB0aGlzLl9jYXJkSGVhcnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19oZWFydF9kYXJrXCIpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSBudWxsOyAvLyBtYWtlIHRoZXNlIGVhc2lseSBhY2Nlc3NpYmxlIHRocm91Z2hvdXQgdGhlIGNsYXNzXHJcbiAgICB0aGlzLl9mb3JtQnV0dG9uID0gbnVsbDsgLy8gdG8gYXZvaWQgcGFzc2luZyB0aGVtIHRocm91Z2ggbWV0aG9kIGNhbGxzXHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9mb3JtQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yVGV4dENsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvclRleHRDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2hhc1ZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybUlucHV0cy5ldmVyeSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuIGlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzVmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yTm9QZXJpb2QgPSBwb3B1cFNlbGVjdG9yLnJlcGxhY2UoXCIuXCIsIFwiXCIpO1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBDbG9zZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgZS5rZXkgPT09IFwiRXNjYXBlXCIgJiYgdGhpcy5jbG9zZSgpO1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBjbGljayBvdXRzaWRlIG1vZGFsXHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyh0aGlzLl9wb3B1cFNlbGVjdG9yTm9QZXJpb2QpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0RnVuYyB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdEZ1bmM7XHJcbiAgICB0aGlzLl9wb3BVcEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xyXG4gICAgdGhpcy5fcG9wdXBTdWJtaXQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXRcIik7XHJcbiAgICB0aGlzLl9wb3B1cFN1Ym1pdFRleHQgPSB0aGlzLl9wb3B1cFN1Ym1pdC50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IHZhbHVlc09iaiA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiAodmFsdWVzT2JqW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcclxuICAgIHJldHVybiB2YWx1ZXNPYmo7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKHsgaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIgfSkge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9wb3B1cFN1Ym1pdC50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fcG9wdXBTdWJtaXQudGV4dENvbnRlbnQgPSB0aGlzLl9wb3B1cFN1Ym1pdFRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3BvcFVwRm9ybTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgZm9ybVZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGZvcm1GaWVsZHNldDogXCIuZm9ybV9fZmllbGRzZXRcIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yVGV4dENsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHsgZm9ybVZhbGlkYXRpb25Db25maWcgfTtcclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcclxuXHJcbmltcG9ydCBBUEkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBmb3JtVmFsaWRhdGlvbkNvbmZpZywgaW5pdGlhbENhcmRzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLy8gZWRpdCBtb2RhbFxyXG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1mb3JtXCJdO1xyXG5cclxuLy8gcHJvZmlsZVxyXG5jb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbi8vIGNvbnN0IHByb2ZpbGUgaW1hZ2UgZWRpdCBidXR0dG9uXHJcbmNvbnN0IHByb2ZpbGVJbWFnZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtZWRpdFwiKTtcclxuXHJcbi8vIGFsbCBmb3Jtc1xyXG5jb25zdCBmb3JtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQuZm9ybXMpO1xyXG5jb25zdCBmb3JtT2JqZWN0cyA9IHt9O1xyXG5cclxuLy8gaG9sZCBjYXJkIHRvIGRlbGV0ZVxyXG5sZXQgY2FyZFRvRGVsZXRlID0gbnVsbDtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBUEkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjMzNTJiNDU4LTMwYzYtNDFiZS05YTQyLTAwYzUyYjgxYjM4NVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyB1c2VyIGluZm8gbWFuaXB1bGF0aW9uIGNsYXNzXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fYXZvY2F0aW9uXCIsXHJcbiAgcGhvdG9TZWxlY3RvcjogXCIucHJvZmlsZV9fYXZhdGFyXCIsXHJcbn0pO1xyXG5cclxuLy8gcHJvZmlsZSBtb2RhbCBwb3B1cFxyXG5jb25zdCBwcm9maWxlTW9kYWxQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wcm9maWxlLW1vZGFsXCIsXHJcbiAgaGFuZGxlU3VibWl0RnVuYzogKGRhdGEpID0+IHtcclxuICAgIHByb2ZpbGVNb2RhbFBvcHVwLnJlbmRlckxvYWRpbmcoeyBpc0xvYWRpbmc6IHRydWUgfSk7XHJcbiAgICBhcGlcclxuICAgICAgLnBhdGNoUHJvZmlsZUluZm9ybWF0aW9uKHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRhdGEuam9iLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcHJvZmlsZU1vZGFsUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICBqb2I6IGRhdGEuam9iLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHByb2ZpbGVNb2RhbFBvcHVwLmdldEZvcm0oKS5yZXNldCgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFBhdGNoIFByb2ZpbGUgRXJyb3I6ICR7ZXJyLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHByb2ZpbGVNb2RhbFBvcHVwLnJlbmRlckxvYWRpbmcoeyBpc0xvYWRpbmc6IGZhbHNlIH0pO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIGFkZCBtb2RhbCBwb3B1cFxyXG5jb25zdCBhZGRNb2RhbFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiLmFkZC1tb2RhbFwiLFxyXG4gIGhhbmRsZVN1Ym1pdEZ1bmM6IChkYXRhKSA9PiB7XHJcbiAgICBhZGRNb2RhbFBvcHVwLnJlbmRlckxvYWRpbmcoeyBpc0xvYWRpbmc6IHRydWUgfSk7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZENhcmQoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBsaW5rOiBkYXRhLmxpbmssXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkT2JqID0gY3JlYXRlQ2FyZCh7XHJcbiAgICAgICAgICBuYW1lOiByZXMubmFtZSxcclxuICAgICAgICAgIGxpbms6IHJlcy5saW5rLFxyXG4gICAgICAgICAgaWQ6IHJlcy5faWQsXHJcbiAgICAgICAgICBpc0xpa2VkOiByZXMuaXNMaWtlZCxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZW5kZXJDYXJkcy5hZGRJdGVtKGNhcmRPYmopO1xyXG4gICAgICAgIGFkZE1vZGFsUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICBhZGRNb2RhbFBvcHVwLmdldEZvcm0oKS5yZXNldCgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYENyZWF0ZSBDYXJkIEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBhZGRNb2RhbFBvcHVwLnJlbmRlckxvYWRpbmcoeyBpc0xvYWRpbmc6IGZhbHNlIH0pO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIGVkaXQgcHJvZmlsZSBpbWFnZSBwb3B1cFxyXG5jb25zdCBlZGl0UHJvZmlsZUltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucHJvZmlsZS1pbWFnZS1tb2RhbFwiLFxyXG4gIGhhbmRsZVN1Ym1pdEZ1bmM6IChkYXRhKSA9PiB7XHJcbiAgICBlZGl0UHJvZmlsZUltYWdlUG9wdXAucmVuZGVyTG9hZGluZyh7IGlzTG9hZGluZzogdHJ1ZSB9KTtcclxuICAgIGFwaVxyXG4gICAgICAudXBkYXRlUHJvZmlsZVBpY3R1cmUoZGF0YS5hdmF0YXIpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VyUGhvdG8oZGF0YSk7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVJbWFnZVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVJbWFnZVBvcHVwLmdldEZvcm0oKS5yZXNldCgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVkaXQgUHJvZmlsZSBJbWFnZSBFcnJvcjogJHtlcnIuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVJbWFnZVBvcHVwLnJlbmRlckxvYWRpbmcoeyBpc0xvYWRpbmc6IGZhbHNlIH0pO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIGltYWdlIHBvcHVwXHJcbmNvbnN0IGltYWdlTW9kYWxQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIuaW1hZ2UtbW9kYWxcIixcclxufSk7XHJcblxyXG4vLyBkZWxldGUgY2FyZCBwb3B1cFxyXG5jb25zdCBkZWxldGVNb2RhbFBvcHVwID0gbmV3IFBvcHVwRGVsZXRlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5kZWxldGUtbW9kYWxcIixcclxuICBoYW5kbGVTdWJtaXRGdW5jOiAoKSA9PiB7XHJcbiAgICBkZWxldGVNb2RhbFBvcHVwLnJlbmRlckxvYWRpbmcoeyBpc0xvYWRpbmc6IHRydWUgfSk7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZFRvRGVsZXRlLmdldElEKCkpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjYXJkVG9EZWxldGUuZ2V0Q2FyZEVsZW1lbnQoKS5yZW1vdmUoKTtcclxuICAgICAgICBjYXJkVG9EZWxldGUgPSBudWxsO1xyXG4gICAgICAgIGRlbGV0ZU1vZGFsUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBEZWxldGUgQ2FyZCBFcnJvcjogJHtlcnIuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlTW9kYWxQb3B1cC5yZW5kZXJMb2FkaW5nKHsgaXNMb2FkaW5nOiBmYWxzZSB9KTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBjcmVhdGUgY2FyZHMgdmlhIHNlY3Rpb24gY2xhc3NcclxuY29uc3QgcmVuZGVyQ2FyZHMgPSBuZXcgU2VjdGlvbihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbmZvcm1zLmZvckVhY2goKGZvcm0pID0+IHtcclxuICBjb25zdCBmb3JtT2JqID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVZhbGlkYXRpb25Db25maWcsIGZvcm0pO1xyXG4gIGZvcm1PYmplY3RzW2Zvcm0uaWRdID0gZm9ybU9iajtcclxuICBmb3JtT2JqLmVuYWJsZVZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBvcGVuRWRpdE1vZGFsKCkge1xyXG4gIHByb2ZpbGVNb2RhbFBvcHVwLm9wZW4oKTtcclxuICBmb3JtT2JqZWN0c1twcm9maWxlRm9ybS5pZF0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZU1vZGFsUG9wdXAuc2V0SW5wdXRWYWx1ZXMoe1xyXG4gICAgbmFtZSxcclxuICAgIGpvYixcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlbkRlbGV0ZU1vZGFsKGNhcmQpIHtcclxuICBjYXJkVG9EZWxldGUgPSBjYXJkO1xyXG4gIGRlbGV0ZU1vZGFsUG9wdXAub3BlbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuSW1hZ2VNb2RhbChjYXJkKSB7XHJcbiAgY29uc3QgaW1hZ2UgPSBjYXJkLmdldENhcmRJbWFnZUVsZW1lbnQoKTtcclxuICBjb25zdCB0aXRsZSA9IGNhcmQuZ2V0Q2FyZFRleHQoKTtcclxuICBpbWFnZU1vZGFsUG9wdXAub3Blbih7XHJcbiAgICBjYXJkTmFtZTogdGl0bGUudGV4dENvbnRlbnQsXHJcbiAgICBjYXJkTGluazogaW1hZ2Uuc3JjLFxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkT2JqID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcclxuICAgICAgbGluazogaXRlbS5saW5rLFxyXG4gICAgICBpZDogaXRlbS5pZCxcclxuICAgICAgaXNMaWtlZDogaXRlbS5pc0xpa2VkLFxyXG4gICAgfSxcclxuICAgIFwiLmNhcmQtdGVtcGxhdGVcIixcclxuICAgIG9wZW5JbWFnZU1vZGFsLFxyXG4gICAgb3BlbkRlbGV0ZU1vZGFsLFxyXG4gICAgaGFuZGxlQ2FyZExpa2VcclxuICApO1xyXG4gIHJldHVybiBjYXJkT2JqLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkTGlrZShjYXJkKSB7XHJcbiAgYXBpXHJcbiAgICAubGlrZUNhcmQoe1xyXG4gICAgICBjYXJkSWQ6IGNhcmQuZ2V0SUQoKSxcclxuICAgICAgbGlrZUJvb2w6IGNhcmQuZ2V0SXNMaWtlZCgpLFxyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY2FyZC5zZXRJc0xpa2VkKHJlcy5pc0xpa2VkKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyBvbiBsb2FkIHJlbmRlciBwcmVleGlzdGluZyBkYXRhXHJcbmFwaVxyXG4gIC5nZXRBcHBJbmZvKClcclxuICAudGhlbigoW2NhcmRzLCB1c2VyRGF0YV0pID0+IHtcclxuICAgIGNvbnN0IHNvcnRlZENhcmRzID0gY2FyZHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICByZXR1cm4gbmV3IERhdGUoYS5jcmVhdGVkQXQpIC0gbmV3IERhdGUoYi5jcmVhdGVkQXQpO1xyXG4gICAgfSk7XHJcbiAgICBzb3J0ZWRDYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRPYmogPSBjcmVhdGVDYXJkKHtcclxuICAgICAgICBuYW1lOiBjYXJkLm5hbWUsXHJcbiAgICAgICAgbGluazogY2FyZC5saW5rLFxyXG4gICAgICAgIGlkOiBjYXJkLl9pZCxcclxuICAgICAgICBpc0xpa2VkOiBjYXJkLmlzTGlrZWQsXHJcbiAgICAgIH0pO1xyXG4gICAgICByZW5kZXJDYXJkcy5hZGRJdGVtKGNhcmRPYmopO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxyXG4gICAgICBqb2I6IHVzZXJEYXRhLmFib3V0LFxyXG4gICAgfSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyUGhvdG8oe1xyXG4gICAgICBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhcixcclxuICAgIH0pO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYExvYWQgSW50aWFsIERhdGEgRXJyb3I6ICR7ZXJyLnN0YXR1c31gKTtcclxuICB9KTtcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuRWRpdE1vZGFsKTtcclxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZE1vZGFsUG9wdXAub3BlbigpO1xyXG59KTtcclxucHJvZmlsZUltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdFByb2ZpbGVJbWFnZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGRNb2RhbFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmltYWdlTW9kYWxQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5kZWxldGVNb2RhbFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVNb2RhbFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRQcm9maWxlSW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBUEkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgdGhpcy5fYmFzZVVSTCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcbiAgICB0aGlzLl9hdXRodG9rZW4gPSBvcHRpb25zLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICAgIHRoaXMuX2NvbnRlbnRUeXBlSlNPTiA9IG9wdGlvbnMuaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvcm1hdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVUkx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEFwcEluZm8oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGFsQ2FyZHMoKSwgdGhpcy5nZXRVc2VySW5mb3JtYXRpb24oKV0pO1xyXG4gIH1cclxuXHJcbiAgcGF0Y2hQcm9maWxlSW5mb3JtYXRpb24oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVVJMfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKHsgY2FyZElkLCBsaWtlQm9vbCB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogbGlrZUJvb2wgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUHJvZmlsZVBpY3R1cmUoaW1hZ2VVUkwpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVUkx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGltYWdlVVJMLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzKTtcclxuICB9XHJcblxyXG4gIF9yZXF1ZXN0KHVybCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgcGhvdG9TZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGhvdG9TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtLnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX2pvYkVsZW0udGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW0udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxlbS50ZXh0Q29udGVudCA9IGpvYjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJQaG90byh7IGF2YXRhcjogbGluayB9KSB7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW0uc3JjID0gbGluaztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1tb2RhbF9faW1nXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtbW9kYWxfX3RpdGxlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IGNhcmROYW1lLCBjYXJkTGluayB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IFwiXCI7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGNhcmRMaW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBjYXJkTmFtZTtcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBjYXJkTmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cERlbGV0ZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZ1bmMgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXRGdW5jO1xyXG4gICAgdGhpcy5fc3VibWl0RGVsZXRlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0XCIpO1xyXG4gICAgdGhpcy5fc3VibWl0RGVsZXRlVGV4dCA9IHRoaXMuX3N1Ym1pdERlbGV0ZS50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fc3VibWl0RGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyh7IGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIkRlbGV0aW5nLi4uXCIgfSkge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXREZWxldGUudGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdERlbGV0ZS50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdERlbGV0ZVRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm9wZW5EZWxldGVNb2RhbCIsImhhbmRsZUNhcmRMaWtlIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsImlkIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUNhcmRMaWtlIiwiX29wZW5EZWxldGVNb2RhbCIsIl9jYXJkRWxlbWVudCIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiX2NhcmRIZWFydEVsZW1lbnQiLCJfY2FyZFRyYXNoRWxlbWVudCIsIl9jYXJkVGV4dEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJfZ2VuZXJhdGVDYXJkVGVtcGxhdGUiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzZXRJc0xpa2VkIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJfaGFuZGxlRGVsZXRlIiwiX2hhbmRsZUxpa2UiLCJnZXRDYXJkSW1hZ2VFbGVtZW50IiwiZ2V0Q2FyZFRleHQiLCJnZXRJRCIsImdldENhcmRFbGVtZW50IiwiZ2V0SXNMaWtlZCIsImJvb2wiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybSIsIl9jb25maWciLCJfZm9ybSIsIl9mb3JtSW5wdXRzIiwiX2Zvcm1CdXR0b24iLCJlbmFibGVWYWxpZGF0aW9uIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9zZXRFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwiaW5wdXQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yVGV4dENsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzVmFsaWRJbnB1dCIsImV2ZXJ5IiwiZGlzYWJsZWQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yTm9QZXJpb2QiLCJyZXBsYWNlIiwiX3BvcHVwIiwiX3BvcHVwQ2xvc2UiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJfcmVmIiwiaGFuZGxlU3VibWl0RnVuYyIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdCIsIl9wb3BVcEZvcm0iLCJfaW5wdXRMaXN0IiwiX3BvcHVwU3VibWl0IiwiX3BvcHVwU3VibWl0VGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlc09iaiIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJyZW5kZXJMb2FkaW5nIiwiX3JlZjIiLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsImdldEZvcm0iLCJmb3JtVmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImZvcm1GaWVsZHNldCIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJwcm9maWxlSW1hZ2VCdXR0b24iLCJmb3JtT2JqZWN0cyIsImNhcmRUb0RlbGV0ZSIsImFwaSIsIm9wdGlvbnMiLCJfb3B0aW9ucyIsIl9iYXNlVVJMIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIl9hdXRodG9rZW4iLCJhdXRob3JpemF0aW9uIiwiX2NvbnRlbnRUeXBlSlNPTiIsImdldFVzZXJJbmZvcm1hdGlvbiIsIl9yZXF1ZXN0IiwibWV0aG9kIiwiZ2V0QXBwSW5mbyIsIlByb21pc2UiLCJhbGwiLCJnZXRJbml0YWxDYXJkcyIsInBhdGNoUHJvZmlsZUluZm9ybWF0aW9uIiwiYWJvdXQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZENhcmQiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwibGlrZUNhcmQiLCJfcmVmMyIsImxpa2VCb29sIiwidXBkYXRlUHJvZmlsZVBpY3R1cmUiLCJpbWFnZVVSTCIsImF2YXRhciIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwicmVqZWN0IiwidXJsIiwiZmV0Y2giLCJ0aGVuIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsInBob3RvU2VsZWN0b3IiLCJfbmFtZUVsZW0iLCJfam9iRWxlbSIsIl9pbWFnZUVsZW0iLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwic2V0VXNlclBob3RvIiwicHJvZmlsZU1vZGFsUG9wdXAiLCJyZXNldCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwic3RhdHVzIiwiZmluYWxseSIsImFkZE1vZGFsUG9wdXAiLCJjYXJkT2JqIiwiY3JlYXRlQ2FyZCIsInJlbmRlckNhcmRzIiwiYWRkSXRlbSIsImVkaXRQcm9maWxlSW1hZ2VQb3B1cCIsImltYWdlTW9kYWxQb3B1cCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJjYXJkTmFtZSIsImNhcmRMaW5rIiwiZGVsZXRlTW9kYWxQb3B1cCIsIl9zdWJtaXREZWxldGUiLCJfc3VibWl0RGVsZXRlVGV4dCIsImNvbnRhaW5lclNlbGVjdG9yIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJwcmVwZW5kIiwiY2FyZCIsIm9wZW5JbWFnZU1vZGFsIiwiaW1hZ2UiLCJ0aXRsZSIsImZvcm1PYmoiLCJjYXJkcyIsInVzZXJEYXRhIiwic29ydCIsImEiLCJiIiwiRGF0ZSIsImNyZWF0ZWRBdCJdLCJzb3VyY2VSb290IjoiIn0=