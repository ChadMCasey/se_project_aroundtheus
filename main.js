!function(){"use strict";class e{constructor(e,t,r){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=r,this._cardElement=null,this._cardImageElement=null,this._cardHeartElement=null,this._cardTrashElement=null,this._cardTextElement=null}generateCard(){return this._cardElement=this._generateCardTemplate(),this._cardImageElement=this._cardElement.querySelector(".card__img"),this._cardHeartElement=this._cardElement.querySelector(".card__heart"),this._cardTrashElement=this._cardElement.querySelector(".card__trash"),this._cardTextElement=this._cardElement.querySelector(".card__title"),this._cardTextElement.textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this._cardElement}_generateCardTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardImageElement.addEventListener("click",(e=>{this._handleImageClick(this)})),this._cardTrashElement.addEventListener("click",(e=>{this._handleDelete()})),this._cardHeartElement.addEventListener("click",(e=>{this._handleLike()}))}_handleDelete(){this._cardElement.remove(),this._cardElement=null}_handleLike(){this._cardHeartElement.classList.toggle("card__heart_dark")}getCardImageElement(){return this._cardImageElement}getCardText(){return this._cardTextElement}}class t{constructor(e,t){this._config=e,this._form=t,this._formInputs=null,this._formButton=null}enableValidation(){this._formInputs=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._formButton=this._form.querySelector(this._config.submitButtonSelector),this._setEventListener()}_setEventListener(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this.resetValidation()})),this._formInputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this.resetValidation()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.errorTextClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorTextClass),t.textContent=""}_hasValidInput(){return this._formInputs.every((e=>e.validity.valid))}_toggleButtonState(){this._hasValidInput()?this._formButton.disabled=!1:this._formButton.disabled=!0}resetValidation(){this._formInputs.forEach((e=>{this._hideInputError(e)})),this._formButton.disabled=!0}}class r{constructor(e){this._popupSelector=e,this._popupSelectorNoPeriod=e.replace(".",""),this._popup=document.querySelector(e),this._popupClose=this._popup.querySelector(".modal__close")}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupClose.addEventListener("click",(()=>{this.close()})),this._popup.addEventListener("click",(e=>{e.target.classList.contains(this._popupSelectorNoPeriod)&&this.close()}))}}class s extends r{constructor(e){let{popupSelector:t,handleSubmitFunc:r}=e;super(t),this._handleSubmit=r,this._popUpForm=this._popup.querySelector(".form"),this._inputList=this._popup.querySelectorAll(".form__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>e[t.name]=t.value)),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues()),this._popUpForm.reset()})),super.setEventListeners()}}const n={formSelector:".modal__form",formFieldset:".form__fieldset",inputSelector:".form__input",submitButtonSelector:".form__submit",inputErrorClass:"form__input_type_error",errorTextClass:"form__input-error_active"},o=document.forms["profile-form"],i=document.querySelector(".profile").querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),l=Array.from(document.forms),c={},m=new class{constructor(e){let{nameSelector:t,jobSelector:r}=e;this._nameElem=document.querySelector(t),this._jobElem=document.querySelector(r)}getUserInfo(){return{name:this._nameElem.textContent,job:this._jobElem.textContent}}setUserInfo(e){let{name:t,job:r}=e;this._nameElem.textContent=t,this._jobElem.textContent=r}}({nameSelector:".profile__name",jobSelector:".profile__avocation"}),d=new s({popupSelector:".profile-modal",handleSubmitFunc:e=>{d.close(),m.setUserInfo({name:e.name,job:e.job})}}),u=new s({popupSelector:".add-modal",handleSubmitFunc:e=>{const t=E({name:e.location,link:e.imageURL});p.addItem(t),u.close()}}),_=new class extends r{constructor(e){let{popupSelector:t}=e;super(t),this._popupImage=this._popup.querySelector(".image-modal__img"),this._popupTitle=this._popup.querySelector(".image-modal__title")}open(e){let{cardName:t,cardLink:r}=e;this._popupImage.src="",this._popupImage.src=r,this._popupImage.alt=t,this._popupTitle.textContent=t,super.open()}}({popupSelector:".image-modal"}),p=new class{constructor(e,t){let{items:r,renderer:s}=e;this._items=r,this._renderer=s,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{p.addItem(E(e))}},".cards__list");function h(e){const t=e.getCardImageElement(),r=e.getCardText();_.open({cardName:r.textContent,cardLink:t.src})}function E(t){return new e({name:t.name,link:t.link},".card-template",h).generateCard()}l.forEach((e=>{const r=new t(n,e);c[e.id]=r,r.enableValidation()})),i.addEventListener("click",(function(){d.open(),c[o.id].resetValidation();const{name:e,job:t}=m.getUserInfo();d.setInputValues({name:e,job:t})})),a.addEventListener("click",(()=>{u.open()})),p.renderItems(),d.setEventListeners(),u.setEventListeners(),_.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBSzlILEtBQ1hFLEtBQU00SCxFQUFLNUgsTUFFYixpQkFDQThILEdBRWF0SCxjQUNqQixDQW5DQW1GLEVBQU1oRCxTQUFTZCxJQUNiLE1BQU1xRyxFQUFVLElBQUl2RyxFQUFjNEQsRUFBc0IxRCxHQUN4RGlFLEVBQVlqRSxFQUFLdUIsSUFBTThFLEVBQ3ZCQSxFQUFRaEcsa0JBQWtCLElBa0M1QjBELEVBQWtCMUUsaUJBQWlCLFNBL0JuQyxXQUNFc0YsRUFBa0JyQyxPQUNsQjJCLEVBQVlKLEVBQVl0QyxJQUFJVixrQkFDNUIsTUFBTSxLQUFFNUMsRUFBSSxJQUFFdUcsR0FBUU4sRUFBU0ssY0FDL0JJLEVBQWtCbkIsZUFBZSxDQUMvQnZGLE9BQ0F1RyxPQUVKLElBd0JBUixFQUFpQjNFLGlCQUFpQixTQUFTLEtBQ3pDdUYsRUFBY3RDLE1BQU0sSUFHdEIyQyxFQUFZYSxjQUNabkIsRUFBa0JoQyxvQkFDbEJpQyxFQUFjakMsb0JBQ2R3QyxFQUFnQnhDLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IG51bGw7XHJcbiAgICB0aGlzLl9jYXJkSGVhcnRFbGVtZW50ID0gbnVsbDtcclxuICAgIHRoaXMuX2NhcmRUcmFzaEVsZW1lbnQgPSBudWxsO1xyXG4gICAgdGhpcy5fY2FyZFRleHRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2VuZXJhdGVDYXJkVGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltZ1wiKTtcclxuICAgIHRoaXMuX2NhcmRIZWFydEVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2hlYXJ0XCIpO1xyXG4gICAgdGhpcy5fY2FyZFRyYXNoRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIik7XHJcbiAgICB0aGlzLl9jYXJkVGV4dEVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9nZW5lcmF0ZUNhcmRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZFRyYXNoRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRIZWFydEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZSgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2UoKSB7XHJcbiAgICB0aGlzLl9jYXJkSGVhcnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19oZWFydF9kYXJrXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZEltYWdlRWxlbWVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZFRleHQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZFRleHRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcclxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSBudWxsOyAvLyBtYWtlIHRoZXNlIGVhc2lseSBhY2Nlc3NpYmxlIHRocm91Z2hvdXQgdGhlIGNsYXNzXHJcbiAgICB0aGlzLl9mb3JtQnV0dG9uID0gbnVsbDsgLy8gdG8gYXZvaWQgcGFzc2luZyB0aGVtIHRocm91Z2ggbWV0aG9kIGNhbGxzXHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9mb3JtQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yVGV4dENsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvclRleHRDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2hhc1ZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybUlucHV0cy5ldmVyeSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuIGlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzVmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2Zvcm1CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yTm9QZXJpb2QgPSBwb3B1cFNlbGVjdG9yLnJlcGxhY2UoXCIuXCIsIFwiXCIpO1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBDbG9zZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBzdGlsbCB0cnlpbmcgdG8gdW5kZXJzdGFuZCB3aHkgXCJ0aGlzXCIgd29ya3MgaW4gdGhpcyBjb250ZXh0LFxyXG4gIC8vIHdpdGggYW4gYXJyb3cgZnVuY3Rpb24uXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGUua2V5ID09PSBcIkVzY2FwZVwiICYmIHRoaXMuY2xvc2UoKTtcclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gY2xpY2sgb3V0c2lkZSBtb2RhbFxyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fcG9wdXBTZWxlY3Rvck5vUGVyaW9kKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZ1bmMgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXRGdW5jO1xyXG4gICAgdGhpcy5fcG9wVXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IHZhbHVlc09iaiA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiAodmFsdWVzT2JqW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcclxuICAgIHJldHVybiB2YWx1ZXNPYmo7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuX3BvcFVwRm9ybS5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuY29uc3QgZm9ybVZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGZvcm1GaWVsZHNldDogXCIuZm9ybV9fZmllbGRzZXRcIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yVGV4dENsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHsgZm9ybVZhbGlkYXRpb25Db25maWcsIGluaXRpYWxDYXJkcyB9O1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGZvcm1WYWxpZGF0aW9uQ29uZmlnLCBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG4vLyBlZGl0IG1vZGFsXHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWZvcm1cIl07XHJcblxyXG4vLyBwcm9maWxlXHJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuLy8gYWxsIGZvcm1zXHJcbmNvbnN0IGZvcm1zID0gQXJyYXkuZnJvbShkb2N1bWVudC5mb3Jtcyk7XHJcbmNvbnN0IGZvcm1PYmplY3RzID0ge307XHJcblxyXG4vLyB1c2VyIGluZm8gbWFuaXB1bGF0aW9uIGNsYXNzXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fYXZvY2F0aW9uXCIsXHJcbn0pO1xyXG5cclxuLy8gcHJvZmlsZSBtb2RhbCBwb3B1cFxyXG5jb25zdCBwcm9maWxlTW9kYWxQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wcm9maWxlLW1vZGFsXCIsXHJcbiAgaGFuZGxlU3VibWl0RnVuYzogKGRhdGEpID0+IHtcclxuICAgIHByb2ZpbGVNb2RhbFBvcHVwLmNsb3NlKCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgam9iOiBkYXRhLmpvYixcclxuICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gYWRkIG1vZGFsIHBvcHVwXHJcbmNvbnN0IGFkZE1vZGFsUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIuYWRkLW1vZGFsXCIsXHJcbiAgaGFuZGxlU3VibWl0RnVuYzogKGRhdGEpID0+IHtcclxuICAgIGNvbnN0IGNhcmQgPSB7XHJcbiAgICAgIG5hbWU6IGRhdGEubG9jYXRpb24sXHJcbiAgICAgIGxpbms6IGRhdGEuaW1hZ2VVUkwsXHJcbiAgICB9O1xyXG4gICAgY29uc3QgY2FyZE9iaiA9IGNyZWF0ZUNhcmQoY2FyZCk7XHJcbiAgICByZW5kZXJDYXJkcy5hZGRJdGVtKGNhcmRPYmopO1xyXG4gICAgYWRkTW9kYWxQb3B1cC5jbG9zZSgpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gaW1hZ2UgcG9wdXBcclxuY29uc3QgaW1hZ2VNb2RhbFBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5pbWFnZS1tb2RhbFwiLFxyXG59KTtcclxuXHJcbi8vIGNyZWF0ZSBjYXJkcyB2aWEgc2VjdGlvbiBjbGFzc1xyXG5jb25zdCByZW5kZXJDYXJkcyA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgcmVuZGVyQ2FyZHMuYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcblxyXG5mb3Jtcy5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgY29uc3QgZm9ybU9iaiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uQ29uZmlnLCBmb3JtKTtcclxuICBmb3JtT2JqZWN0c1tmb3JtLmlkXSA9IGZvcm1PYmo7XHJcbiAgZm9ybU9iai5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gb3BlbkVkaXRNb2RhbCgpIHtcclxuICBwcm9maWxlTW9kYWxQb3B1cC5vcGVuKCk7XHJcbiAgZm9ybU9iamVjdHNbcHJvZmlsZUZvcm0uaWRdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVNb2RhbFBvcHVwLnNldElucHV0VmFsdWVzKHtcclxuICAgIG5hbWUsXHJcbiAgICBqb2IsXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5JbWFnZU1vZGFsKGNhcmQpIHtcclxuICBjb25zdCBpbWFnZSA9IGNhcmQuZ2V0Q2FyZEltYWdlRWxlbWVudCgpO1xyXG4gIGNvbnN0IHRpdGxlID0gY2FyZC5nZXRDYXJkVGV4dCgpO1xyXG4gIGltYWdlTW9kYWxQb3B1cC5vcGVuKHtcclxuICAgIGNhcmROYW1lOiB0aXRsZS50ZXh0Q29udGVudCxcclxuICAgIGNhcmRMaW5rOiBpbWFnZS5zcmMsXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmRPYmogPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4gICAgICBsaW5rOiBpdGVtLmxpbmssXHJcbiAgICB9LFxyXG4gICAgXCIuY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgb3BlbkltYWdlTW9kYWxcclxuICApO1xyXG4gIHJldHVybiBjYXJkT2JqLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkVkaXRNb2RhbCk7XHJcbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRNb2RhbFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5yZW5kZXJDYXJkcy5yZW5kZXJJdGVtcygpO1xyXG5wcm9maWxlTW9kYWxQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRNb2RhbFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmltYWdlTW9kYWxQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgam9iIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW0udGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtbW9kYWxfX2ltZ1wiKTtcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLW1vZGFsX190aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBjYXJkTmFtZSwgY2FyZExpbmsgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBcIlwiO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBjYXJkTGluaztcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gY2FyZE5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cFRpdGxlLnRleHRDb250ZW50ID0gY2FyZE5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAvLyByZW5kZXIgaXRlbXMgdmlhIGNhbGwgYmFja1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9jYXJkRWxlbWVudCIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiX2NhcmRIZWFydEVsZW1lbnQiLCJfY2FyZFRyYXNoRWxlbWVudCIsIl9jYXJkVGV4dEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJfZ2VuZXJhdGVDYXJkVGVtcGxhdGUiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIl9oYW5kbGVEZWxldGUiLCJfaGFuZGxlTGlrZSIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdldENhcmRJbWFnZUVsZW1lbnQiLCJnZXRDYXJkVGV4dCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwiX2NvbmZpZyIsIl9mb3JtIiwiX2Zvcm1JbnB1dHMiLCJfZm9ybUJ1dHRvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3NldEV2ZW50TGlzdGVuZXIiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImZvckVhY2giLCJpbnB1dCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvclRleHRDbGFzcyIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc1ZhbGlkSW5wdXQiLCJldmVyeSIsImRpc2FibGVkIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3Rvck5vUGVyaW9kIiwicmVwbGFjZSIsIl9wb3B1cCIsIl9wb3B1cENsb3NlIiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiX3JlZiIsImhhbmRsZVN1Ym1pdEZ1bmMiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXQiLCJfcG9wVXBGb3JtIiwiX2lucHV0TGlzdCIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlc09iaiIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImZvcm1WYWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiZm9ybUZpZWxkc2V0IiwicHJvZmlsZUZvcm0iLCJmb3JtcyIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUFkZEJ1dHRvbiIsImZvcm1PYmplY3RzIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbSIsIl9qb2JFbGVtIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwicHJvZmlsZU1vZGFsUG9wdXAiLCJhZGRNb2RhbFBvcHVwIiwiY2FyZE9iaiIsImNyZWF0ZUNhcmQiLCJsb2NhdGlvbiIsImltYWdlVVJMIiwicmVuZGVyQ2FyZHMiLCJhZGRJdGVtIiwiaW1hZ2VNb2RhbFBvcHVwIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsImNhcmROYW1lIiwiY2FyZExpbmsiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwicHJlcGVuZCIsIm9wZW5JbWFnZU1vZGFsIiwiY2FyZCIsImltYWdlIiwidGl0bGUiLCJmb3JtT2JqIl0sInNvdXJjZVJvb3QiOiIifQ==