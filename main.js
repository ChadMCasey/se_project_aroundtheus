!function(){"use strict";class e{constructor(e,t,r,s,i){this._name=e.name,this._link=e.link,this._id=e.id,this._isLiked=e.isLiked,this._cardSelector=t,this._handleImageClick=r,this._handleCardLike=i,this._openDeleteModal=s,this._cardElement=null,this._cardImageElement=null,this._cardHeartElement=null,this._cardTrashElement=null,this._cardTextElement=null}generateCard(){return this._cardElement=this._generateCardTemplate(),this._cardImageElement=this._cardElement.querySelector(".card__img"),this._cardHeartElement=this._cardElement.querySelector(".card__heart"),this._cardTrashElement=this._cardElement.querySelector(".card__trash"),this._cardTextElement=this._cardElement.querySelector(".card__title"),this._cardTextElement.textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this.setIsLiked(this._isLiked),this._cardElement}_generateCardTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardImageElement.addEventListener("click",(e=>{this._handleImageClick(this)})),this._cardTrashElement.addEventListener("click",(e=>{this._handleDelete(e)})),this._cardHeartElement.addEventListener("click",(e=>{this._handleLike(e)}))}_handleDelete(e){this._openDeleteModal(this)}_handleLike(e){this._handleCardLike(this)}getCardImageElement(){return this._cardImageElement}getCardText(){return this._cardTextElement}getID(){return this._id}getCardElement(){return this._cardElement}getIsLiked(){return this._isLiked}setIsLiked(e){this._isLiked=e,e?this._cardHeartElement.classList.add("card__heart_dark"):this._cardHeartElement.classList.remove("card__heart_dark")}}class t{constructor(e,t){this._config=e,this._form=t,this._formInputs=null,this._formButton=null}enableValidation(){this._formInputs=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._formButton=this._form.querySelector(this._config.submitButtonSelector),this._setEventListener()}_setEventListener(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this.resetValidation()})),this._formInputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this.resetValidation()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.errorTextClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorTextClass),t.textContent=""}_hasValidInput(){return this._formInputs.every((e=>e.validity.valid))}_toggleButtonState(){this._hasValidInput()?this._formButton.disabled=!1:this._formButton.disabled=!0}resetValidation(){this._formInputs.forEach((e=>{this._hideInputError(e)})),this._formButton.disabled=!0}}class r{constructor(e){this._popupSelector=e,this._popupSelectorNoPeriod=e.replace(".",""),this._popup=document.querySelector(e),this._popupClose=this._popup.querySelector(".modal__close")}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupClose.addEventListener("click",(()=>{this.close()})),this._popup.addEventListener("click",(e=>{e.target.classList.contains(this._popupSelectorNoPeriod)&&this.close()}))}}class s extends r{constructor(e){let{popupSelector:t,handleSubmitFunc:r}=e;super(t),this._handleSubmit=r,this._popUpForm=this._popup.querySelector(".form"),this._inputList=this._popup.querySelectorAll(".form__input"),this._popupSubmit=this._popup.querySelector(".modal__submit"),this._popupSumbitText=this._popupSubmit.textContent}_getInputValues(){const e={};return this._inputList.forEach((t=>e[t.name]=t.value)),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues()),this._popUpForm.reset()})),super.setEventListeners()}toggleSubmitText(e){this._popupSubmit.textContent=e?"Saving...":this._popupSumbitText}}const i={formSelector:".modal__form",formFieldset:".form__fieldset",inputSelector:".form__input",submitButtonSelector:".form__submit",inputErrorClass:"form__input_type_error",errorTextClass:"form__input-error_active"},o=document.forms["profile-form"],n=document.querySelector(".profile").querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__image-edit"),c=Array.from(document.forms),d={};let h=null;const u=new class{constructor(e){this._options=e,this._baseURL=e.baseUrl,this._authtoken=e.headers.authorization,this._contentTypeJSON=e.headers["Content-Type"]}getInitalCards(){return fetch(`${this._baseURL}/cards`,{method:"GET",headers:{authorization:this._authtoken}}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Loading Cards: ${e.status}`)}))}getUserInformation(){return fetch(`${this._baseURL}/users/me`,{method:"GET",headers:{authorization:this._authtoken}}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Loading Cards: ${e.status}`)}))}renderCardsValidator(){return Promise.all([this.getInitalCards(),this.getUserInformation()])}patchProfileInformation(e){let{name:t,about:r}=e;return fetch(`${this._baseURL}/users/me`,{method:"PATCH",headers:{authorization:this._authtoken,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:r})}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Patching Profile Information: ${e.status}`)}))}addCard(e){let{name:t,link:r}=e;return fetch(`${this._baseURL}/cards`,{method:"POST",headers:{authorization:this._authtoken,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:r})}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Addding Cards: ${e.status}`)}))}deleteCard(e){return fetch(`${this._baseURL}/cards/${e}`,{method:"DELETE",headers:{authorization:this._authtoken}}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Deleting Cards: ${e.status}`)}))}likeCard(e){let{cardId:t,likeBool:r}=e;return fetch(`${this._baseURL}/cards/${t}/likes`,{method:r?"DELETE":"PUT",headers:{authorization:this._authtoken}}).then((e=>{if(e.ok)return e.json()})).catch((e=>{console.error(`Error Liking Card: ${e.status}`)}))}updateProfilePicture(e){return fetch(`${this._baseURL}/users/me/avatar`,{method:"PATCH",headers:{authorization:this._authtoken,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject(e))).catch((e=>{console.error(`Error Updating Profile Picture: ${e.status}`)}))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"3352b458-30c6-41be-9a42-00c52b81b385","Content-Type":"application/json"}}),m=new class{constructor(e){let{nameSelector:t,jobSelector:r,photoSelector:s}=e;this._nameElem=document.querySelector(t),this._jobElem=document.querySelector(r),this._imageElem=document.querySelector(s)}getUserInfo(){return{name:this._nameElem.textContent,job:this._jobElem.textContent}}setUserInfo(e){let{name:t,job:r}=e;this._nameElem.textContent=t,this._jobElem.textContent=r}setUserPhoto(e){let{avatar:t}=e;this._imageElem.src=t}}({nameSelector:".profile__name",jobSelector:".profile__avocation",photoSelector:".profile__avatar"}),_=new s({popupSelector:".profile-modal",handleSubmitFunc:e=>{_.toggleSubmitText(!0),u.patchProfileInformation({name:e.name,about:e.job}).then((t=>{_.close(),m.setUserInfo({name:e.name,job:e.job}),_.toggleSubmitText(!1)}))}}),p=new s({popupSelector:".add-modal",handleSubmitFunc:e=>{p.toggleSubmitText(!0),u.addCard({name:e.name,link:e.link}).then((e=>{const t=k({name:e.name,link:e.link,id:e._id,isLiked:e.isLiked});S.addItem(t),p.close(),p.toggleSubmitText(!1)}))}}),E=new s({popupSelector:".profile-image-modal",handleSubmitFunc:e=>{E.toggleSubmitText(!0),u.updateProfilePicture(e.avatar).then((t=>{m.setUserPhoto(e),E.close(),E.toggleSubmitText(!1)}))}}),g=new class extends r{constructor(e){let{popupSelector:t}=e;super(t),this._popupImage=this._popup.querySelector(".image-modal__img"),this._popupTitle=this._popup.querySelector(".image-modal__title")}open(e){let{cardName:t,cardLink:r}=e;this._popupImage.src="",this._popupImage.src=r,this._popupImage.alt=t,this._popupTitle.textContent=t,super.open()}}({popupSelector:".image-modal"}),f=new class extends r{constructor(e){let{popupSelector:t,handleSubmitFunc:r}=e;super(t),this._handleSubmit=r,this._submitDelete=this._popup.querySelector(".modal__submit"),this._popupSubmit=this._popup.querySelector(".modal__submit"),this._popupSumbitText=this._popupSubmit.textContent}setEventListeners(){this._submitDelete.addEventListener("click",(()=>{this._handleSubmit()})),super.setEventListeners()}toggleSubmitText(e){this._popupSubmit.textContent=e?"Saving...":this._popupSumbitText}}({popupSelector:".delete-modal",handleSubmitFunc:()=>{f.toggleSubmitText(!0),u.deleteCard(h.getID()).then((e=>{h.getCardElement().remove(),h=null,f.close(),f.toggleSubmitText(!1)}))}}),S=new class{constructor(e){this._container=document.querySelector(e)}addItem(e){this._container.prepend(e)}}(".cards__list");function b(e){h=e,f.open()}function L(e){const t=e.getCardImageElement(),r=e.getCardText();g.open({cardName:r.textContent,cardLink:t.src})}function k(t){return new e({name:t.name,link:t.link,id:t.id,isLiked:t.isLiked},".card-template",L,b,C).generateCard()}function C(e){u.likeCard({cardId:e.getID(),likeBool:e.getIsLiked()}).then((t=>{e.setIsLiked(t.isLiked)}))}c.forEach((e=>{const r=new t(i,e);d[e.id]=r,r.enableValidation()})),u.renderCardsValidator().then((e=>{e[0].sort(((e,t)=>new Date(e.createdAt)-new Date(t.createdAt))).forEach((e=>{const t=k({name:e.name,link:e.link,id:e._id,isLiked:e.isLiked});S.addItem(t)}))})),u.getUserInformation().then((e=>{m.setUserInfo({name:e.name,job:e.about}),m.setUserPhoto({avatar:e.avatar})})),n.addEventListener("click",(function(){_.open(),d[o.id].resetValidation();const{name:e,job:t}=m.getUserInfo();_.setInputValues({name:e,job:t})})),a.addEventListener("click",(()=>{p.open()})),l.addEventListener("click",(()=>{E.open()})),p.setEventListeners(),g.setEventListeners(),f.setEventListeners(),_.setEventListeners(),E.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixFQUFjakYsb0JBQ2R1RixFQUFnQnZGLG9CQUNoQjRGLEVBQWlCNUYsb0JBQ2pCZ0YsRUFBa0JoRixvQkFDbEJzRixFQUFzQnRGLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQVBJLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZGF0YSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBvcGVuRGVsZXRlTW9kYWwsXHJcbiAgICBoYW5kbGVDYXJkTGlrZVxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuaWQ7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gZGF0YS5pc0xpa2VkO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlO1xyXG4gICAgdGhpcy5fb3BlbkRlbGV0ZU1vZGFsID0gb3BlbkRlbGV0ZU1vZGFsO1xyXG5cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSBudWxsO1xyXG4gICAgdGhpcy5fY2FyZEhlYXJ0RWxlbWVudCA9IG51bGw7XHJcbiAgICB0aGlzLl9jYXJkVHJhc2hFbGVtZW50ID0gbnVsbDtcclxuICAgIHRoaXMuX2NhcmRUZXh0RWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dlbmVyYXRlQ2FyZFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWdcIik7XHJcbiAgICB0aGlzLl9jYXJkSGVhcnRFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19oZWFydFwiKTtcclxuICAgIHRoaXMuX2NhcmRUcmFzaEVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRleHRFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkVGV4dEVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLnNldElzTGlrZWQodGhpcy5faXNMaWtlZCk7IC8vIG9uIGxvYWQgc2V0IGlzbGlrZWQuXHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2dlbmVyYXRlQ2FyZFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkVHJhc2hFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGUoZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRIZWFydEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2UoZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGUoZSkge1xyXG4gICAgdGhpcy5fb3BlbkRlbGV0ZU1vZGFsKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2UoZSkge1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZExpa2UodGhpcyk7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkSW1hZ2VFbGVtZW50KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkVGV4dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkVGV4dEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZXRJRCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcblxyXG4gIGdldENhcmRFbGVtZW50KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgc2V0SXNMaWtlZChib29sKSB7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gYm9vbDtcclxuICAgIGJvb2xcclxuICAgICAgPyB0aGlzLl9jYXJkSGVhcnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjYXJkX19oZWFydF9kYXJrXCIpXHJcbiAgICAgIDogdGhpcy5fY2FyZEhlYXJ0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9faGVhcnRfZGFya1wiKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuXHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzID0gbnVsbDsgLy8gbWFrZSB0aGVzZSBlYXNpbHkgYWNjZXNzaWJsZSB0aHJvdWdob3V0IHRoZSBjbGFzc1xyXG4gICAgdGhpcy5fZm9ybUJ1dHRvbiA9IG51bGw7IC8vIHRvIGF2b2lkIHBhc3NpbmcgdGhlbSB0aHJvdWdoIG1ldGhvZCBjYWxsc1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fZm9ybUJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5yZXNldFZhbGlkYXRpb24oKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvclRleHRDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JUZXh0Q2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9oYXNWYWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1JbnB1dHMuZXZlcnkoKGlucHV0KSA9PiB7XHJcbiAgICAgIHJldHVybiBpbnB1dC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc1ZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9mb3JtQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9mb3JtQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9mb3JtQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvck5vUGVyaW9kID0gcG9wdXBTZWxlY3Rvci5yZXBsYWNlKFwiLlwiLCBcIlwiKTtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGUua2V5ID09PSBcIkVzY2FwZVwiICYmIHRoaXMuY2xvc2UoKTtcclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gY2xpY2sgb3V0c2lkZSBtb2RhbFxyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fcG9wdXBTZWxlY3Rvck5vUGVyaW9kKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZ1bmMgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXRGdW5jO1xyXG4gICAgdGhpcy5fcG9wVXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX3BvcHVwU3VibWl0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0XCIpO1xyXG4gICAgdGhpcy5fcG9wdXBTdW1iaXRUZXh0ID0gdGhpcy5fcG9wdXBTdWJtaXQudGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCB2YWx1ZXNPYmogPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4gKHZhbHVlc09ialtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKSk7XHJcbiAgICByZXR1cm4gdmFsdWVzT2JqO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLl9wb3BVcEZvcm0ucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZVN1Ym1pdFRleHQoYm9vbCkge1xyXG4gICAgdGhpcy5fcG9wdXBTdWJtaXQudGV4dENvbnRlbnQgPSBib29sID8gXCJTYXZpbmcuLi5cIiA6IHRoaXMuX3BvcHVwU3VtYml0VGV4dDtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgZm9ybVZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGZvcm1GaWVsZHNldDogXCIuZm9ybV9fZmllbGRzZXRcIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yVGV4dENsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHsgZm9ybVZhbGlkYXRpb25Db25maWcgfTtcclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcclxuXHJcbmltcG9ydCBBUEkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBmb3JtVmFsaWRhdGlvbkNvbmZpZywgaW5pdGlhbENhcmRzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLy8gZWRpdCBtb2RhbFxyXG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1mb3JtXCJdO1xyXG5cclxuLy8gcHJvZmlsZVxyXG5jb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbi8vIGNvbnN0IHByb2ZpbGUgaW1hZ2UgZWRpdCBidXR0dG9uXHJcbmNvbnN0IHByb2ZpbGVJbWFnZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtZWRpdFwiKTtcclxuXHJcbi8vIGFsbCBmb3Jtc1xyXG5jb25zdCBmb3JtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQuZm9ybXMpO1xyXG5jb25zdCBmb3JtT2JqZWN0cyA9IHt9O1xyXG5cclxuLy8gaG9sZCBjYXJkIHRvIGRlbGV0ZVxyXG5sZXQgY2FyZFRvRGVsZXRlID0gbnVsbDtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBUEkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjMzNTJiNDU4LTMwYzYtNDFiZS05YTQyLTAwYzUyYjgxYjM4NVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyB1c2VyIGluZm8gbWFuaXB1bGF0aW9uIGNsYXNzXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fYXZvY2F0aW9uXCIsXHJcbiAgcGhvdG9TZWxlY3RvcjogXCIucHJvZmlsZV9fYXZhdGFyXCIsXHJcbn0pO1xyXG5cclxuLy8gcHJvZmlsZSBtb2RhbCBwb3B1cFxyXG5jb25zdCBwcm9maWxlTW9kYWxQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wcm9maWxlLW1vZGFsXCIsXHJcbiAgaGFuZGxlU3VibWl0RnVuYzogKGRhdGEpID0+IHtcclxuICAgIHByb2ZpbGVNb2RhbFBvcHVwLnRvZ2dsZVN1Ym1pdFRleHQodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLnBhdGNoUHJvZmlsZUluZm9ybWF0aW9uKHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRhdGEuam9iLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcHJvZmlsZU1vZGFsUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICBqb2I6IGRhdGEuam9iLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHByb2ZpbGVNb2RhbFBvcHVwLnRvZ2dsZVN1Ym1pdFRleHQoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIGFkZCBtb2RhbCBwb3B1cFxyXG5jb25zdCBhZGRNb2RhbFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiLmFkZC1tb2RhbFwiLFxyXG4gIGhhbmRsZVN1Ym1pdEZ1bmM6IChkYXRhKSA9PiB7XHJcbiAgICBhZGRNb2RhbFBvcHVwLnRvZ2dsZVN1Ym1pdFRleHQodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZENhcmQoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBsaW5rOiBkYXRhLmxpbmssXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkT2JqID0gY3JlYXRlQ2FyZCh7XHJcbiAgICAgICAgICBuYW1lOiByZXMubmFtZSxcclxuICAgICAgICAgIGxpbms6IHJlcy5saW5rLFxyXG4gICAgICAgICAgaWQ6IHJlcy5faWQsXHJcbiAgICAgICAgICBpc0xpa2VkOiByZXMuaXNMaWtlZCxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZW5kZXJDYXJkcy5hZGRJdGVtKGNhcmRPYmopO1xyXG4gICAgICAgIGFkZE1vZGFsUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICBhZGRNb2RhbFBvcHVwLnRvZ2dsZVN1Ym1pdFRleHQoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIGVkaXQgcHJvZmlsZSBpbWFnZSBwb3B1cFxyXG5jb25zdCBlZGl0UHJvZmlsZUltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucHJvZmlsZS1pbWFnZS1tb2RhbFwiLFxyXG4gIGhhbmRsZVN1Ym1pdEZ1bmM6IChkYXRhKSA9PiB7XHJcbiAgICBlZGl0UHJvZmlsZUltYWdlUG9wdXAudG9nZ2xlU3VibWl0VGV4dCh0cnVlKTtcclxuICAgIGFwaS51cGRhdGVQcm9maWxlUGljdHVyZShkYXRhLmF2YXRhcikudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJQaG90byhkYXRhKTtcclxuICAgICAgZWRpdFByb2ZpbGVJbWFnZVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIGVkaXRQcm9maWxlSW1hZ2VQb3B1cC50b2dnbGVTdWJtaXRUZXh0KGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gaW1hZ2UgcG9wdXBcclxuY29uc3QgaW1hZ2VNb2RhbFBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5pbWFnZS1tb2RhbFwiLFxyXG59KTtcclxuXHJcbi8vIGRlbGV0ZSBjYXJkIHBvcHVwXHJcbmNvbnN0IGRlbGV0ZU1vZGFsUG9wdXAgPSBuZXcgUG9wdXBEZWxldGUoe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiLmRlbGV0ZS1tb2RhbFwiLFxyXG4gIGhhbmRsZVN1Ym1pdEZ1bmM6ICgpID0+IHtcclxuICAgIGRlbGV0ZU1vZGFsUG9wdXAudG9nZ2xlU3VibWl0VGV4dCh0cnVlKTtcclxuICAgIGFwaS5kZWxldGVDYXJkKGNhcmRUb0RlbGV0ZS5nZXRJRCgpKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgY2FyZFRvRGVsZXRlLmdldENhcmRFbGVtZW50KCkucmVtb3ZlKCk7XHJcbiAgICAgIGNhcmRUb0RlbGV0ZSA9IG51bGw7XHJcbiAgICAgIGRlbGV0ZU1vZGFsUG9wdXAuY2xvc2UoKTtcclxuICAgICAgZGVsZXRlTW9kYWxQb3B1cC50b2dnbGVTdWJtaXRUZXh0KGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gY3JlYXRlIGNhcmRzIHZpYSBzZWN0aW9uIGNsYXNzXHJcbmNvbnN0IHJlbmRlckNhcmRzID0gbmV3IFNlY3Rpb24oXCIuY2FyZHNfX2xpc3RcIik7XHJcblxyXG5mb3Jtcy5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgY29uc3QgZm9ybU9iaiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uQ29uZmlnLCBmb3JtKTtcclxuICBmb3JtT2JqZWN0c1tmb3JtLmlkXSA9IGZvcm1PYmo7XHJcbiAgZm9ybU9iai5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gdG9nZ2xlU2F2aW5nKCkge31cclxuXHJcbmZ1bmN0aW9uIG9wZW5FZGl0TW9kYWwoKSB7XHJcbiAgcHJvZmlsZU1vZGFsUG9wdXAub3BlbigpO1xyXG4gIGZvcm1PYmplY3RzW3Byb2ZpbGVGb3JtLmlkXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlTW9kYWxQb3B1cC5zZXRJbnB1dFZhbHVlcyh7XHJcbiAgICBuYW1lLFxyXG4gICAgam9iLFxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuRGVsZXRlTW9kYWwoY2FyZCkge1xyXG4gIGNhcmRUb0RlbGV0ZSA9IGNhcmQ7XHJcbiAgZGVsZXRlTW9kYWxQb3B1cC5vcGVuKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5JbWFnZU1vZGFsKGNhcmQpIHtcclxuICBjb25zdCBpbWFnZSA9IGNhcmQuZ2V0Q2FyZEltYWdlRWxlbWVudCgpO1xyXG4gIGNvbnN0IHRpdGxlID0gY2FyZC5nZXRDYXJkVGV4dCgpO1xyXG4gIGltYWdlTW9kYWxQb3B1cC5vcGVuKHtcclxuICAgIGNhcmROYW1lOiB0aXRsZS50ZXh0Q29udGVudCxcclxuICAgIGNhcmRMaW5rOiBpbWFnZS5zcmMsXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmRPYmogPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4gICAgICBsaW5rOiBpdGVtLmxpbmssXHJcbiAgICAgIGlkOiBpdGVtLmlkLFxyXG4gICAgICBpc0xpa2VkOiBpdGVtLmlzTGlrZWQsXHJcbiAgICB9LFxyXG4gICAgXCIuY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgb3BlbkltYWdlTW9kYWwsXHJcbiAgICBvcGVuRGVsZXRlTW9kYWwsXHJcbiAgICBoYW5kbGVDYXJkTGlrZVxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmRPYmouZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRMaWtlKGNhcmQpIHtcclxuICBhcGlcclxuICAgIC5saWtlQ2FyZCh7XHJcbiAgICAgIGNhcmRJZDogY2FyZC5nZXRJRCgpLFxyXG4gICAgICBsaWtlQm9vbDogY2FyZC5nZXRJc0xpa2VkKCksXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjYXJkLnNldElzTGlrZWQocmVzLmlzTGlrZWQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIG9uIGxvYWQgcmVuZGVyIHByZWV4aXN0aW5nIGNhcmRzXHJcbmFwaS5yZW5kZXJDYXJkc1ZhbGlkYXRvcigpLnRoZW4oKHJlcykgPT4ge1xyXG4gIC8vIHNvcnQgdGhlIGNhcmRzIG9uIHRoZSBjcmVhdGlvbiBkYXRlIGRhdGUgYmVmb3JlIHdlIHJlbmRlciB0aGVtLlxyXG4gIGNvbnN0IHNvcnRlZENhcmRzID0gcmVzWzBdLnNvcnQoKGEsIGIpID0+IHtcclxuICAgIHJldHVybiBuZXcgRGF0ZShhLmNyZWF0ZWRBdCkgLSBuZXcgRGF0ZShiLmNyZWF0ZWRBdCk7XHJcbiAgfSk7XHJcbiAgc29ydGVkQ2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4gICAgY29uc3QgY2FyZE9iaiA9IGNyZWF0ZUNhcmQoe1xyXG4gICAgICBuYW1lOiBjYXJkLm5hbWUsXHJcbiAgICAgIGxpbms6IGNhcmQubGluayxcclxuICAgICAgaWQ6IGNhcmQuX2lkLFxyXG4gICAgICBpc0xpa2VkOiBjYXJkLmlzTGlrZWQsXHJcbiAgICB9KTtcclxuICAgIHJlbmRlckNhcmRzLmFkZEl0ZW0oY2FyZE9iaik7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gb24gbG9hZCBzZXQgdXNlciBpbmZvcm1hdGlvblxyXG5hcGkuZ2V0VXNlckluZm9ybWF0aW9uKCkudGhlbigocmVzKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgbmFtZTogcmVzLm5hbWUsXHJcbiAgICBqb2I6IHJlcy5hYm91dCxcclxuICB9KTtcclxuICB1c2VySW5mby5zZXRVc2VyUGhvdG8oe1xyXG4gICAgYXZhdGFyOiByZXMuYXZhdGFyLFxyXG4gIH0pO1xyXG59KTtcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuRWRpdE1vZGFsKTtcclxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZE1vZGFsUG9wdXAub3BlbigpO1xyXG59KTtcclxucHJvZmlsZUltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdFByb2ZpbGVJbWFnZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGRNb2RhbFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmltYWdlTW9kYWxQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5kZWxldGVNb2RhbFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVNb2RhbFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRQcm9maWxlSW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBUEkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgdGhpcy5fYmFzZVVSTCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2F1dGh0b2tlbiA9IG9wdGlvbnMuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gICAgdGhpcy5fY29udGVudFR5cGVKU09OID0gb3B0aW9ucy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGh0b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgTG9hZGluZyBDYXJkczogJHtlcnIuc3RhdHVzfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvcm1hdGlvbigpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aHRva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBMb2FkaW5nIENhcmRzOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ2FyZHNWYWxpZGF0b3IoKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGFsQ2FyZHMoKSwgdGhpcy5nZXRVc2VySW5mb3JtYXRpb24oKV0pO1xyXG4gIH1cclxuXHJcbiAgcGF0Y2hQcm9maWxlSW5mb3JtYXRpb24oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aHRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIFBhdGNoaW5nIFByb2ZpbGUgSW5mb3JtYXRpb246ICR7ZXJyLnN0YXR1c31gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRodG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBBZGRkaW5nIENhcmRzOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIC8vIHRoZSBjYXJkIGlkIGlzIGZvdW5kIGluIHRoZSByZXNwZWN0aXZlIGpzb24gb2JqZWN0XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRodG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIERlbGV0aW5nIENhcmRzOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQoeyBjYXJkSWQsIGxpa2VCb29sIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogbGlrZUJvb2wgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGh0b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgTGlraW5nIENhcmQ6ICR7ZXJyLnN0YXR1c31gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlUGljdHVyZShpbWFnZVVSTCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRodG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGltYWdlVVJMLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgVXBkYXRpbmcgUHJvZmlsZSBQaWN0dXJlOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBwaG90b1NlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwaG90b1NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW0udGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbS50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbGVtLnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlclBob3RvKHsgYXZhdGFyOiBsaW5rIH0pIHtcclxuICAgIHRoaXMuX2ltYWdlRWxlbS5zcmMgPSBsaW5rO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLW1vZGFsX19pbWdcIik7XHJcbiAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1tb2RhbF9fdGl0bGVcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgY2FyZE5hbWUsIGNhcmRMaW5rIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gXCJcIjtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gY2FyZExpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGNhcmROYW1lO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IGNhcmROYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0RnVuYyB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdEZ1bmM7XHJcbiAgICB0aGlzLl9zdWJtaXREZWxldGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXRcIik7XHJcbiAgICB0aGlzLl9wb3B1cFN1Ym1pdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdFwiKTtcclxuICAgIHRoaXMuX3BvcHVwU3VtYml0VGV4dCA9IHRoaXMuX3BvcHVwU3VibWl0LnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXREZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICAvLyBub3QgYWxsIHBvcHVwcyBoYXZlIHN1Ym1pdHMgKHNvIGkgY291bGRudCBwdXQgdGhpcyBpbiB0aGUgcGFyZW50IGNsYXNzKVxyXG4gIHRvZ2dsZVN1Ym1pdFRleHQoYm9vbCkge1xyXG4gICAgdGhpcy5fcG9wdXBTdWJtaXQudGV4dENvbnRlbnQgPSBib29sID8gXCJTYXZpbmcuLi5cIiA6IHRoaXMuX3BvcHVwU3VtYml0VGV4dDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwib3BlbkRlbGV0ZU1vZGFsIiwiaGFuZGxlQ2FyZExpa2UiLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2lkIiwiaWQiLCJfaXNMaWtlZCIsImlzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlQ2FyZExpa2UiLCJfb3BlbkRlbGV0ZU1vZGFsIiwiX2NhcmRFbGVtZW50IiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJfY2FyZEhlYXJ0RWxlbWVudCIsIl9jYXJkVHJhc2hFbGVtZW50IiwiX2NhcmRUZXh0RWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsIl9nZW5lcmF0ZUNhcmRUZW1wbGF0ZSIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsInNldElzTGlrZWQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIl9oYW5kbGVEZWxldGUiLCJfaGFuZGxlTGlrZSIsImdldENhcmRJbWFnZUVsZW1lbnQiLCJnZXRDYXJkVGV4dCIsImdldElEIiwiZ2V0Q2FyZEVsZW1lbnQiLCJnZXRJc0xpa2VkIiwiYm9vbCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwiX2NvbmZpZyIsIl9mb3JtIiwiX2Zvcm1JbnB1dHMiLCJfZm9ybUJ1dHRvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3NldEV2ZW50TGlzdGVuZXIiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImZvckVhY2giLCJpbnB1dCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JUZXh0Q2xhc3MiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNWYWxpZElucHV0IiwiZXZlcnkiLCJkaXNhYmxlZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3JOb1BlcmlvZCIsInJlcGxhY2UiLCJfcG9wdXAiLCJfcG9wdXBDbG9zZSIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsIl9yZWYiLCJoYW5kbGVTdWJtaXRGdW5jIiwic3VwZXIiLCJfaGFuZGxlU3VibWl0IiwiX3BvcFVwRm9ybSIsIl9pbnB1dExpc3QiLCJfcG9wdXBTdWJtaXQiLCJfcG9wdXBTdW1iaXRUZXh0IiwiX2dldElucHV0VmFsdWVzIiwidmFsdWVzT2JqIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwidG9nZ2xlU3VibWl0VGV4dCIsImZvcm1WYWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiZm9ybUZpZWxkc2V0IiwicHJvZmlsZUZvcm0iLCJmb3JtcyIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVJbWFnZUJ1dHRvbiIsImZvcm1PYmplY3RzIiwiY2FyZFRvRGVsZXRlIiwiYXBpIiwib3B0aW9ucyIsIl9vcHRpb25zIiwiX2Jhc2VVUkwiLCJiYXNlVXJsIiwiX2F1dGh0b2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiX2NvbnRlbnRUeXBlSlNPTiIsImdldEluaXRhbENhcmRzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwic3RhdHVzIiwiZ2V0VXNlckluZm9ybWF0aW9uIiwicmVuZGVyQ2FyZHNWYWxpZGF0b3IiLCJhbGwiLCJwYXRjaFByb2ZpbGVJbmZvcm1hdGlvbiIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRDYXJkIiwiX3JlZjIiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwibGlrZUNhcmQiLCJfcmVmMyIsImxpa2VCb29sIiwidXBkYXRlUHJvZmlsZVBpY3R1cmUiLCJpbWFnZVVSTCIsImF2YXRhciIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJwaG90b1NlbGVjdG9yIiwiX25hbWVFbGVtIiwiX2pvYkVsZW0iLCJfaW1hZ2VFbGVtIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsInNldFVzZXJQaG90byIsInByb2ZpbGVNb2RhbFBvcHVwIiwiYWRkTW9kYWxQb3B1cCIsImNhcmRPYmoiLCJjcmVhdGVDYXJkIiwicmVuZGVyQ2FyZHMiLCJhZGRJdGVtIiwiZWRpdFByb2ZpbGVJbWFnZVBvcHVwIiwiaW1hZ2VNb2RhbFBvcHVwIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsImNhcmROYW1lIiwiY2FyZExpbmsiLCJkZWxldGVNb2RhbFBvcHVwIiwiX3N1Ym1pdERlbGV0ZSIsImNvbnRhaW5lclNlbGVjdG9yIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJwcmVwZW5kIiwiY2FyZCIsIm9wZW5JbWFnZU1vZGFsIiwiaW1hZ2UiLCJ0aXRsZSIsImZvcm1PYmoiLCJzb3J0IiwiYSIsImIiLCJEYXRlIiwiY3JlYXRlZEF0Il0sInNvdXJjZVJvb3QiOiIifQ==